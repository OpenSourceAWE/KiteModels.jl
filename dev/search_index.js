var documenterSearchIndex = {"docs":
[{"location":"functions/","page":"Functions","title":"Functions","text":"CurrentModule = KiteModels","category":"page"},{"location":"functions/#Introduction","page":"Functions","title":"Introduction","text":"","category":"section"},{"location":"functions/","page":"Functions","title":"Functions","text":"Most of the functions work on a KPS3 or KPS4 object. For this, the variable s is used. Such a variable can be created with the lines:","category":"page"},{"location":"functions/","page":"Functions","title":"Functions","text":"using KiteSimulators\nconst s = KPS3(KCU(se()))","category":"page"},{"location":"functions/","page":"Functions","title":"Functions","text":"Or, if you want to use the 4 point kite model:","category":"page"},{"location":"functions/","page":"Functions","title":"Functions","text":"using KiteSimulators\nconst s = KPS4(KCU(se()))","category":"page"},{"location":"functions/","page":"Functions","title":"Functions","text":"Functions with an \"!\" as last character of the function name modify one of more of their parameters, in this context mostly the variable s.","category":"page"},{"location":"functions/#Input-functions","page":"Functions","title":"Input functions","text":"","category":"section"},{"location":"functions/","page":"Functions","title":"Functions","text":"set_depower_steering!\nset_v_wind_ground!","category":"page"},{"location":"functions/#KiteModels.set_depower_steering!","page":"Functions","title":"KiteModels.set_depower_steering!","text":"set_depower_steering!(s::AKM, depower, steering)\n\nSetter for the depower and steering model inputs. \n\nParameters:\n\ndepower:   Relative depower,  must be between 0 .. 1.0\nsteering:  Relative steering, must be between -1.0 .. 1.0.  \n\nThis function sets the variables s.depower, s.steering and s.alpha_depower. \n\nIt takes the depower offset c0 and the dependency of the steering sensitivity from the depower settings into account.\n\n\n\n\n\n","category":"function"},{"location":"functions/#KiteModels.set_v_wind_ground!","page":"Functions","title":"KiteModels.set_v_wind_ground!","text":"set_v_wind_ground!(s::AKM, height, v_wind_gnd=s.set.v_wind; upwind_dir=0.0)\n\nSet the vector of the wind-velocity at the height of the kite. As parameter the height, the ground wind speed [m/s] and the upwind direction [radians] are needed. Is called by the function next_step!.\n\n\n\n\n\n","category":"function"},{"location":"functions/#Output-functions","page":"Functions","title":"Output functions","text":"","category":"section"},{"location":"functions/","page":"Functions","title":"Functions","text":"unstretched_length\ntether_length\npos_kite\ncalc_height\ncalc_elevation\ncalc_azimuth\ncalc_azimuth_east\ncalc_azimuth_north\ncalc_heading\ncalc_course\ncl_cd\nwinch_force\nspring_forces\nlift_drag\nlift_over_drag\nv_wind_kite\nkite_ref_frame\norient_euler\nSysState","category":"page"},{"location":"functions/#KiteModels.unstretched_length","page":"Functions","title":"KiteModels.unstretched_length","text":"unstretched_length(s::KPS4_3L)\n\nGetter for the unstretched tether reel-out lenght (at zero force).\n\n\n\n\n\nunstretched_length(s::AKM)\n\nGetter for the unstretched tether reel-out lenght (at zero force).\n\n\n\n\n\n","category":"function"},{"location":"functions/#KiteModels.tether_length","page":"Functions","title":"KiteModels.tether_length","text":"tether_length(s::KPS4_3L)\n\nCalculate and return the real, stretched tether lenght.\n\n\n\n\n\ntether_length(s::AKM)\n\nCalculate and return the real, stretched tether lenght.\n\n\n\n\n\n","category":"function"},{"location":"functions/#KiteModels.pos_kite","page":"Functions","title":"KiteModels.pos_kite","text":"pos_kite(s::KPS4)\n\nReturn the position of the kite (top particle).\n\n\n\n\n\npos_kite(s::KPS4_3L)\n\nReturn the position of the kite (top particle).\n\n\n\n\n\npos_kite(s::KPS3)\n\nReturn the position of the kite (top particle).\n\n\n\n\n\n","category":"function"},{"location":"functions/#KiteModels.calc_height","page":"Functions","title":"KiteModels.calc_height","text":"calc_height(s::KPS4)\n\nDetermine the height of the topmost kite particle above ground.\n\n\n\n\n\ncalc_height(s::KPS4_3L)\n\nDetermine the height of the topmost kite particle above ground.\n\n\n\n\n\ncalc_height(s::KPS3)\n\nDetermine the height of the kite particle above ground.\n\n\n\n\n\n","category":"function"},{"location":"functions/#KiteUtils.calc_elevation","page":"Functions","title":"KiteUtils.calc_elevation","text":"calc_elevation(s::AKM)\n\nDetermine the elevation angle of the kite in radian.\n\n\n\n\n\n","category":"function"},{"location":"functions/#KiteModels.calc_azimuth","page":"Functions","title":"KiteModels.calc_azimuth","text":"calc_azimuth(s::AKM)\n\nDetermine the azimuth angle of the kite in wind reference frame in radian. Positive anti-clockwise when seen from above.\n\n\n\n\n\n","category":"function"},{"location":"functions/#KiteModels.calc_azimuth_east","page":"Functions","title":"KiteModels.calc_azimuth_east","text":"calc_azimuth_east(s::AKM)\n\nDetermine the azimuth_east angle of the kite in radian. Positive clockwise when seen from above.\n\n\n\n\n\n","category":"function"},{"location":"functions/#KiteModels.calc_azimuth_north","page":"Functions","title":"KiteModels.calc_azimuth_north","text":"calc_azimuth_north(s::AKM)\n\nDetermine the azimuth_north angle of the kite in radian. Positive anti-clockwise when seen from above.\n\n\n\n\n\n","category":"function"},{"location":"functions/#KiteUtils.calc_heading","page":"Functions","title":"KiteUtils.calc_heading","text":"calc_heading(s::AKM; upwind_dir_=upwind_dir(s), neg_azimuth=false, one_point=false)\n\nDetermine the heading angle of the kite in radian.\n\n\n\n\n\n","category":"function"},{"location":"functions/#KiteUtils.calc_course","page":"Functions","title":"KiteUtils.calc_course","text":"calc_course(s::AKM)\n\nDetermine the course angle of the kite in radian. Undefined if the velocity of the kite is near zero.\n\n\n\n\n\n","category":"function"},{"location":"functions/#KiteModels.cl_cd","page":"Functions","title":"KiteModels.cl_cd","text":"cl_cd(s::KPS4)\n\nCalculate the lift and drag coefficients of the kite, based on the current angles of attack.\n\n\n\n\n\ncl_cd(s::KPS3)\n\nCalculate the lift and drag coefficients of the kite, based on the current angles of attack.\n\n\n\n\n\n","category":"function"},{"location":"functions/#KiteModels.winch_force","page":"Functions","title":"KiteModels.winch_force","text":"winch_force(s::KPS4)\n\nReturn the absolute value of the force at the winch as calculated during the last timestep. \n\n\n\n\n\nwinch_force(s::KPS4_3L)\n\nReturn the absolute value of the force at the winch as calculated during the last timestep. \n\n\n\n\n\nwinch_force(s::KPS3)\n\nReturn the absolute value of the force at the winch as calculated during the last timestep. \n\n\n\n\n\n","category":"function"},{"location":"functions/#KiteModels.spring_forces","page":"Functions","title":"KiteModels.spring_forces","text":"spring_forces(s::AKM)\n\nReturn an array of the scalar spring forces of all tether segements.\n\n\n\n\n\n","category":"function"},{"location":"functions/#KiteModels.lift_drag","page":"Functions","title":"KiteModels.lift_drag","text":"lift_drag(s::AKM)\n\nReturn a tuple of the scalar lift and drag forces. \n\nExample:  \n\nlift, drag = lift_drag(s)\n\n\n\n\n\n","category":"function"},{"location":"functions/#KiteModels.lift_over_drag","page":"Functions","title":"KiteModels.lift_over_drag","text":"lift_over_drag(s::AKM)\n\nReturn the lift-over-drag ratio.\n\n\n\n\n\n","category":"function"},{"location":"functions/#KiteModels.v_wind_kite","page":"Functions","title":"KiteModels.v_wind_kite","text":"v_wind_kite(s::AKM)\n\nReturn the vector of the wind speed at the height of the kite.\n\n\n\n\n\n","category":"function"},{"location":"functions/#KiteModels.kite_ref_frame","page":"Functions","title":"KiteModels.kite_ref_frame","text":"kite_ref_frame(s::KPS4; one_point=false)\n\nReturns a tuple of the x, y, and z vectors of the kite reference frame.\n\n\n\n\n\nkite_ref_frame(s::KPS4_3L; one_point=false)\n\nReturns a tuple of the x, y, and z vectors of the kite reference frame. The parameter one_point is not used in this model.\n\n\n\n\n\nkite_ref_frame(s::KPS3)\n\nReturns a tuple of the x, y, and z vectors of the kite reference frame.\n\n\n\n\n\n","category":"function"},{"location":"functions/#KiteModels.orient_euler","page":"Functions","title":"KiteModels.orient_euler","text":"orient_euler(s::AKM)\n\nCalculate and return the orientation of the kite in euler angles (roll, pitch, yaw) as SVector.\n\n\n\n\n\n","category":"function"},{"location":"functions/#KiteUtils.SysState","page":"Functions","title":"KiteUtils.SysState","text":"SysState(s::AKM, zoom=1.0)\n\nConstructor for creating a SysState object from a kite model (KPS3 or KPS4). The SysState object can be used either for logging or for displaying the system state in a viewer. Optionally the position arrays can be zoomed according to the requirements of the viewer.\n\n\n\n\n\n","category":"type"},{"location":"functions/#High-level-simulation-interface","page":"Functions","title":"High level simulation interface","text":"","category":"section"},{"location":"functions/","page":"Functions","title":"Functions","text":"init_sim!\nnext_step!","category":"page"},{"location":"functions/#KiteModels.init_sim!","page":"Functions","title":"KiteModels.init_sim!","text":"init_sim!(s::KPS4_3L; damping_coeff=50.0, prn=false, torque_control=true)\n\nInitialises the integrator of the model.\n\nParameters:\n\ns:     an instance of a 3 line kite model\ndamping_coeff: amount of damping in the first steps\nprn: if set to true, print the detailed solver results\ntorque_control: wether or not to use torque control\n\nReturns: Nothing.\n\n\n\n\n\ninit_sim!(s::AKM; t_end=1.0, stiffness_factor=0.5, delta=0.001, prn=false)\n\nInitialises the integrator of the model.\n\nParameters:\n\ns:     an instance of an abstract kite model\nt_end: end time of the simulation; normally not needed\nstiffness_factor: factor applied to the tether stiffness during initialisation\ndelta: initial stretch of the tether during the steady state calculation\nprn: if set to true, print the detailed solver results\n\nReturns: An instance of a DAE integrator.\n\n\n\n\n\n","category":"function"},{"location":"functions/#KiteModels.next_step!","page":"Functions","title":"KiteModels.next_step!","text":"next_step!(s::AKM, integrator; set_speed = nothing, set_torque=nothing, set_force=nothing, v_wind_gnd=s.set.v_wind, \n           upwind_dir=-pi/2, dt=1/s.set.sample_freq)\n\nCalculates the next simulation step. Either set_speed or set_torque must be provided.\n\nParameters:\n\ns:            an instance of an abstract kite model\nintegrator:   an integrator instance as returned by the function init_sim!\nset_speed:         set value of reel out speed in m/s or nothing\nset_torque:   set value of the torque in Nm or nothing\nset_force:    set value of the force in N or nothing (only for logging, not used otherwise)\nv_wind_gnd: wind speed at reference height in m/s\nupwind_dir: upwind direction in radians, the direction the wind is coming from. Zero is at north;                clockwise positive. Default: -pi/2, wind from west.\ndt:           time step in seconds\n\nReturns: The end time of the time step in seconds.\n\n\n\n\n\n","category":"function"},{"location":"functions/#Low-level-simulation-interface","page":"Functions","title":"Low level simulation interface","text":"","category":"section"},{"location":"functions/","page":"Functions","title":"Functions","text":"clear!\nfind_steady_state!\nresidual!","category":"page"},{"location":"functions/#KiteModels.clear!","page":"Functions","title":"KiteModels.clear!","text":"clear!(s::KPS4)\n\nInitialize the kite power model.\n\n\n\n\n\nclear!(s::KPS4_3L)\n\nInitialize the kite power model.\n\n\n\n\n\nclear!(s::KPS3)\n\nInitialize the kite power model.\n\n\n\n\n\n","category":"function"},{"location":"functions/#KiteModels.find_steady_state!","page":"Functions","title":"KiteModels.find_steady_state!","text":"find_steady_state!(s::KPS4; prn=false, delta = 0.01, stiffness_factor=0.035)\n\nFind an initial equilibrium, based on the inital parameters l_tether, elevation and v_reel_out.\n\n\n\n\n\nfind_steady_state!(s::KPS3, prn=false, delta = 0.0, stiffness_factor=0.035)\n\nFind an initial equilibrium, based on the inital parameters l_tether, elevation and v_reel_out.\n\n\n\n\n\n","category":"function"},{"location":"functions/#KiteModels.residual!","page":"Functions","title":"KiteModels.residual!","text":"residual!(res, yd, y::MVector{S, SimFloat}, s::KPS4, time) where S\n\nN-point tether model, four points for the kite on top:\nInputs:\nState vector y   = pos1,  pos2, ... , posn,  vel1,  vel2, . .., veln,  length, v_reel_out\nDerivative   yd  = posd1, posd2, ..., posdn, veld1, veld2, ..., veldn, lengthd, v_reel_outd\nOutput:\nResidual     res = res1, res2 = vel1-posd1,  ..., veld1-acc1, ..., \n\nAdditional parameters:\ns: Struct with work variables, type KPS4\nS: The dimension of the state vector\n\nThe number of the point masses of the model N = S/6, the state of each point  is represented by two 3 element vectors.\n\n\n\n\n\nresidual!(res, yd, y::MVector{S, SimFloat}, s::KPS3, time) where S\n\nN-point tether model, one point kite at the top:\nInputs:\nState vector y   = pos1, pos2, ..., posn, vel1, vel2, ..., veln\nDerivative   yd  = vel1, vel2, ..., veln, acc1, acc2, ..., accn\nOutput:\nResidual     res = res1, res2 = pos1,  ..., vel1, ...\n\nAdditional parameters:\ns: Struct with work variables, type KPS3\nS: The dimension of the state vector\n\nThe number of the point masses of the model N = S/6, the state of each point  is represented by two 3 element vectors.\n\n\n\n\n\n","category":"function"},{"location":"functions/#Helper-functions","page":"Functions","title":"Helper functions","text":"","category":"section"},{"location":"functions/","page":"Functions","title":"Functions","text":"copy_examples\ncopy_bin\ncalc_drag\ncalc_set_cl_cd!\ncalc_aero_forces!\ncalc_particle_forces!\ninner_loop!\nloop!","category":"page"},{"location":"functions/#KiteModels.copy_examples","page":"Functions","title":"KiteModels.copy_examples","text":"copy_examples()\n\nCopy all example scripts to the folder \"examples\" (it will be created if it doesn't exist).\n\n\n\n\n\n","category":"function"},{"location":"functions/#KiteModels.copy_bin","page":"Functions","title":"KiteModels.copy_bin","text":"copy_bin()\n\nCopy the scripts createsysimage and run_julia to the folder \"bin\" (it will be created if it doesn't exist).\n\n\n\n\n\n","category":"function"},{"location":"functions/#KiteModels.calc_drag","page":"Functions","title":"KiteModels.calc_drag","text":"calc_drag(s::KPS3, v_segment, unit_vector, rho, last_tether_drag, v_app_perp)\n\nCalculate the drag of one tether segment, result stored in parameter last_tether_drag. Return the norm of the apparent wind velocity.\n\n\n\n\n\n","category":"function"},{"location":"functions/#KiteModels.calc_set_cl_cd!","page":"Functions","title":"KiteModels.calc_set_cl_cd!","text":"calc_set_cl_cd!(s::KPS3, vec_c, v_app)\n\nCalculate the lift over drag ratio as a function of the direction vector of the last tether segment, the current depower setting and the apparent wind speed. Set the calculated CL and CD values in the struct s. \n\n\n\n\n\n","category":"function"},{"location":"functions/#KiteModels.calc_aero_forces!","page":"Functions","title":"KiteModels.calc_aero_forces!","text":"calc_aero_forces!(s::KPS4, pos, vel, rho, alpha_depower, rel_steering)\n\nCalculates the aerodynamic forces acting on the kite particles.\n\nParameters:\n\npos:              vector of the particle positions\nvel:              vector of the particle velocities\nrho:              air density [kg/m^3]\nrel_depower:      value between  0.0 and  1.0\nalpha_depower:    depower angle [degrees]\nrel_steering:     value between -1.0 and +1.0\n\nUpdates the vector s.forces of the first parameter.\n\n\n\n\n\ncalc_aero_forces!(s::KPS4_3L, eqs2, force_eqs, force, pos, vel, t, e_x, e_y, e_z, rho)\n\nCalculates the aerodynamic forces acting on the kite particles.\n\nParameters:\n\npos:              vector of the particle positions\nvel:              vector of the particle velocities\nrho:              air density [kg/m^3]\n\nUpdates the vector s.forces of the first parameter.\n\n\n\n\n\n","category":"function"},{"location":"functions/#KiteModels.calc_particle_forces!","page":"Functions","title":"KiteModels.calc_particle_forces!","text":"calc_particle_forces!(s::KPS4, pos1, pos2, vel1, vel2, spring, segments, d_tether, rho, i)\n\nCalculate the drag force of the tether segment, defined by the parameters pos1, pos2, vel1 and vel2 and distribute it equally on the two particles, that are attached to the segment. The result is stored in the array s.forces. \n\n\n\n\n\ncalc_particle_forces!(s::KPS4_3L, eqs2, force_eqs, force, pos1, pos2, vel1, vel2, length, c_spring, damping, \n                      rho, i, l_0, k, c, segment, rel_vel, av_vel, norm1, unit_vector, k1, k2, c1, spring_vel,\n                      spring_force, v_apparent, v_wind_tether, area, v_app_perp, half_drag_force)\n\nCalculate the drag force and spring force of the tether segment, defined by the parameters pos1, pos2, vel1 and vel2 and distribute it equally on the two particles, that are attached to the segment. The result is stored in the array s.forces. \n\n\n\n\n\n","category":"function"},{"location":"functions/#KiteModels.inner_loop!","page":"Functions","title":"KiteModels.inner_loop!","text":"inner_loop!(s::KPS4, pos, vel, v_wind_gnd, segments, d_tether)\n\nCalculate the forces, acting on all particles.\n\nOutput:\n\ns.forces\ns.v_wind_tether\n\n\n\n\n\ninner_loop!(s::KPS4_3L, eqs2, force_eqs, t, force, pos, vel, length, c_spring, damping, v_wind_gnd)\n\nCalculate the forces, acting on all particles.\n\nOutput:length\n\ns.forces\ns.vwindtether\n\n\n\n\n\n","category":"function"},{"location":"functions/#KiteModels.loop!","page":"Functions","title":"KiteModels.loop!","text":"loop!(s::KPS4, pos, vel, posd, veld)\n\nCalculate the vectors s.res1 and calculate s.res2 using loops that iterate over all tether segments. \n\n\n\n\n\n","category":"function"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"CurrentModule = KiteModels","category":"page"},{"location":"quickstart/#Quickstart","page":"Quickstart","title":"Quickstart","text":"","category":"section"},{"location":"quickstart/#Installation-of-Julia","page":"Quickstart","title":"Installation of Julia","text":"","category":"section"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"For a quick test of this program, it is NOT needed to install VSCode, git or bash. Just installing Julia is sufficient, and that can be done in a few minutes. ","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"<details>\n  <summary>Windows</summary>","category":"page"},{"location":"quickstart/#Windows","page":"Quickstart","title":"Windows","text":"","category":"section"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"Please download and install Julia using juliaup. Launch the Command Prompt app and type:","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"winget install julia -s msstore\njuliaup add 1.10\njuliaup update","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"If that doesn't work, download https://install.julialang.org/Julia.appinstaller and double-click on the downloaded file to install it.","category":"page"},{"location":"quickstart/#Optional","page":"Quickstart","title":"Optional","text":"","category":"section"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"It is suggested to install Windows Terminal . Copy and paste works better, unicode works much better and you can use it with bash or Command Prompt, whatever you prefer. It is suggested to set one of these two as default using the Settings menu of Windows Terminal.","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"</details>","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"<details>\n  <summary>Linux</summary>","category":"page"},{"location":"quickstart/#Linux","page":"Quickstart","title":"Linux","text":"","category":"section"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"Copy and past the following line to install julia:","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"curl -fsSL https://install.julialang.org | sh","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"Restart your terminal, and then execute:","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"juliaup add 1.10\njuliaup update","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"It is suggested to add the following line to your .bashrc file:","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"alias jl='./bin/run_julia'","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"This makes it possible to run Julia with the shortcut jl later.","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"</details>","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"<details>\n  <summary>Mac</summary>","category":"page"},{"location":"quickstart/#Mac","page":"Quickstart","title":"Mac","text":"","category":"section"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"Please download and install juliaup as explained at https://github.com/JuliaLang/juliaup .","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"Restart your terminal, and then execute:","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"juliaup add 1.10\njuliaup update","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"</details>","category":"page"},{"location":"quickstart/#Create-a-test-project","page":"Quickstart","title":"Create a test project","text":"","category":"section"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"Launch a command prompt and create a folder with the name \"test\":","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"mkdir test\ncd test\njulia --project=\".\"","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"With the last command, we told Julia to create a new project in the current directory.","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"Then we add the three required packages to our new project. By pressing the key \"]\" we enter the package manager mode where we can add or delete packages.","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"]\nadd KiteUtils\nadd KitePodModels\nadd KiteModels\nadd ControlPlots\nst\n<BACKSPACE>","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"The command \"st\" was not really required, but it is useful to display which versions of the packages we have in our project. Another important package manager command is the command \"up\", which updates all packages to the latest compatible versions.","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"Then, copy the default configuration files and examples to your new project:","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"using KiteModels\ncopy_settings()\ncopy_examples()","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"The first command copies the files settings.yaml and system.yaml to the folder data. They can be customized later. The second command creates an examples folder with some examples.","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"Your folder structure should now look like this:","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"shell> tree\n.\n├── data\n│   ├── kite.obj\n│   ├── settings.yaml\n│   └── system.yaml\n├── examples\n│   ├── bench.jl\n│   ├── compare_kps3_kps4.jl\n│   ├── menu.jl\n│   ├── reel_out_1p.jl\n│   ├── reel_out_4p.jl\n│   ├── reel_out_4p_torque_control.jl\n│   ├── simulate_simple.jl\n│   └── simulate_steering.jl\n├── Manifest.toml\n└── Project.toml\n\n2 directories, 7 files","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"You can access the operating system command line by typing the character \";\", you then get a \"shell\" prompt and can enter operating system commands. To leave shell mode, type \\<BACKSLASH\\>.  On windows you need to type tree /f instead of tree to see the files.","category":"page"},{"location":"quickstart/#Executing-the-first-example","page":"Quickstart","title":"Executing the first example","text":"","category":"section"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"From the Julia prompt you can use the command \"include\" to execute a script:","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"include(\"examples/simulate_simple.jl\")","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"On Windows you need to type \"\\\\\" instead of \"/\":","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"include(\"examples\\\\simulate_simple.jl\")","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"You will see the 4-point kite fly for 30s. If you want to change the settings of the simulation, open the file simulate_simple.jlin your favorite text editor, modify the settings at the beginning of the file and execute the include command again. You can use the <TAB> key for autocompletion, for exampleinclude(exTABcompletes toinclude(examples` which can save a lot of typing. If you type <TAB> again you get a list of files to choose from.","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"Try out changing the following default settings:","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"dt = 0.05\nSTEPS = 600\nPLOT = true\nFRONT_VIEW = false\nZOOM = true\nPRINT = false\nSTATISTIC = false","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"Now you can quit Julia with the command exit(). If you want to launch Julia again, be sure to be in the correct folder and then type julia --project. Without the parameter --project it will not load your project settings.","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"The first run of the script will be slow because Julia must compile the code. The second and any further run is very fast, but only as long as you do not leave your Julia session.","category":"page"},{"location":"quickstart/#Comparing-the-one-point-and-the-four-point-kite-model","page":"Quickstart","title":"Comparing the one-point and the four-point kite model","text":"","category":"section"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"Start Julia in the project folder you created before:","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"cd test\njulia --project","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"and then execute the command","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"using KiteModels\ninclude(\"examples/compare_kps3_kps4.jl\")","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"Use the command include(\"examples\\\\compare_kps3_kps4.jl\") on Windows.","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"The last view of the animation should look like this:","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"(Image: Initial State)","category":"page"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"You can save what you see with the command savefig(\"kite.png\").","category":"page"},{"location":"quickstart/#Exercise","page":"Quickstart","title":"Exercise","text":"","category":"section"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"Modify the variable ALPHA_ZERO in line 11 of the script until the lift force of the 1 point model and the 4 point model match.","category":"page"},{"location":"quickstart/#Questions?","page":"Quickstart","title":"Questions?","text":"","category":"section"},{"location":"quickstart/","page":"Quickstart","title":"Quickstart","text":"If you have any questions, please ask in the Julia Discourse forum in the section modelling and simulation , or in in the section First steps . The Julia community is very friendly and responsive.","category":"page"},{"location":"examples/","page":"Examples_1p","title":"Examples_1p","text":"CurrentModule = KiteModels","category":"page"},{"location":"examples/#Examples-for-using-the-one-point-kite-model","page":"Examples_1p","title":"Examples for using the one point kite model","text":"","category":"section"},{"location":"examples/#Create-a-test-project","page":"Examples_1p","title":"Create a test project","text":"","category":"section"},{"location":"examples/","page":"Examples_1p","title":"Examples_1p","text":"mkdir test\ncd test\njulia --project=\".\"","category":"page"},{"location":"examples/","page":"Examples_1p","title":"Examples_1p","text":"With the last command, we told Julia to create a new project in the current directory.","category":"page"},{"location":"examples/","page":"Examples_1p","title":"Examples_1p","text":"Then we add the three required packages to our new project. By pressing the key \"]\" we enter the package manager mode where we can add or delete packages.","category":"page"},{"location":"examples/","page":"Examples_1p","title":"Examples_1p","text":"]\nadd KiteUtils\nadd KitePodModels\nadd KiteModels\nst\n<BACKSPACE>","category":"page"},{"location":"examples/","page":"Examples_1p","title":"Examples_1p","text":"The command \"st\" was not really required, but it is useful to display which versions of the packages we have in our project. Another important package manager command is the command \"up\", which updates all packages to the latest compatible versions.","category":"page"},{"location":"examples/","page":"Examples_1p","title":"Examples_1p","text":"Then, copy the default configuration files and examples to your new project:","category":"page"},{"location":"examples/","page":"Examples_1p","title":"Examples_1p","text":"using KiteModels\ncopy_settings()\ncopy_examples()","category":"page"},{"location":"examples/","page":"Examples_1p","title":"Examples_1p","text":"The first command copies the files settings.yaml and system.yaml to the folder data. They can be customized later. The second command creates an examples folder with some examples.","category":"page"},{"location":"examples/#Plotting-the-initial-state","page":"Examples_1p","title":"Plotting the initial state","text":"","category":"section"},{"location":"examples/","page":"Examples_1p","title":"Examples_1p","text":"First, an instance of the model of the kite control unit (KCU) is created which is needed by the Kite Power System model KPS3. Then we create a kps instance, passing the kcu model as parameter. We need to declare the type these variables to achieve a decent performance.","category":"page"},{"location":"examples/","page":"Examples_1p","title":"Examples_1p","text":"using KiteModels\nkcu::KCU = KCU(se())\nkps::KPS3 = KPS3(kcu)","category":"page"},{"location":"examples/","page":"Examples_1p","title":"Examples_1p","text":"Then we call the function find_steady_state which uses a non-linear solver to find the solution for a given elevation angle, reel-out speed and wind speed. ","category":"page"},{"location":"examples/","page":"Examples_1p","title":"Examples_1p","text":"find_steady_state!(kps, prn=true)","category":"page"},{"location":"examples/","page":"Examples_1p","title":"Examples_1p","text":"To plot the result in 2D we extract the vectors of the x and z coordinates of the tether particles with a for loop:","category":"page"},{"location":"examples/","page":"Examples_1p","title":"Examples_1p","text":"x = Float64[] \nz = Float64[]\nfor i in 1:length(kps.pos)\n     push!(x, kps.pos[i][1])\n     push!(z, kps.pos[i][3])\nend","category":"page"},{"location":"examples/","page":"Examples_1p","title":"Examples_1p","text":"And finally, we plot the position of the particles in the x-z plane. When you type using ControlPlots you will be asked if you want to install the ControlPlots package. Just press \\<ENTER\\> and it gets installed.","category":"page"},{"location":"examples/","page":"Examples_1p","title":"Examples_1p","text":"using ControlPlots\nplot(x,z, xlabel=\"x [m]\", ylabel=\"z [m]\", scatter=true)","category":"page"},{"location":"examples/#Inital-State","page":"Examples_1p","title":"Inital State","text":"","category":"section"},{"location":"examples/","page":"Examples_1p","title":"Examples_1p","text":"(Image: Initial State)","category":"page"},{"location":"examples/#Print-other-model-outputs","page":"Examples_1p","title":"Print other model outputs","text":"","category":"section"},{"location":"examples/","page":"Examples_1p","title":"Examples_1p","text":"Print the vector of the positions of the particles:","category":"page"},{"location":"examples/","page":"Examples_1p","title":"Examples_1p","text":"julia> kps.pos\n7-element StaticArrays.SVector{7, StaticArrays.MVector{3, Float64}} with indices SOneTo(7):\n [0.0, 0.0, 0.0]\n [26.95751778658999, 0.0, 59.59749511924355]\n [51.97088814144287, 0.0, 120.03746888266994]\n [75.01423773175357, 0.0, 181.25637381120865]\n [96.06809940556136, 0.0, 243.18841293054678]\n [115.11959241520753, 0.0, 305.7661763854397]\n [132.79571663189674, 0.0, 368.74701279158705]\n","category":"page"},{"location":"examples/","page":"Examples_1p","title":"Examples_1p","text":"Print the unstretched and stretched tether length and the height of the kite:","category":"page"},{"location":"examples/","page":"Examples_1p","title":"Examples_1p","text":"julia> unstretched_length(kps)\n150.0\n\njulia> tether_length(kps)\n150.1461801769623\n\njulia> calc_height(kps)\n142.78102261557189","category":"page"},{"location":"examples/","page":"Examples_1p","title":"Examples_1p","text":"Print the force at the winch (groundstation, in Newton) and at each tether segment:","category":"page"},{"location":"examples/","page":"Examples_1p","title":"Examples_1p","text":"julia> winch_force(kps)\n592.5649922210812\n\njulia> spring_forces(kps)\n6-element Vector{Float64}:\n 592.5534481632459\n 595.0953689567787\n 597.6497034999358\n 600.215921248686\n 602.793488771366\n 605.3855398009119","category":"page"},{"location":"examples/","page":"Examples_1p","title":"Examples_1p","text":"The force increases when going upwards because the kite not only experiences the winch force but in addition the weight of the tether.","category":"page"},{"location":"examples/","page":"Examples_1p","title":"Examples_1p","text":"Print the lift and drag forces of the kite (in Newton) and the lift-over-drag ratio:","category":"page"},{"location":"examples/","page":"Examples_1p","title":"Examples_1p","text":"julia> lift, drag = lift_drag(kps)\n(730.5877517655691, 157.36420900755007)\n\njulia> lift_over_drag(kps)\n4.64265512706588","category":"page"},{"location":"examples/","page":"Examples_1p","title":"Examples_1p","text":"Print the wind speed vector at the kite:","category":"page"},{"location":"examples/","page":"Examples_1p","title":"Examples_1p","text":"julia> v_wind_kite(kps)\n3-element StaticArrays.MVector{3, Float64} with indices SOneTo(3):\n 12.54966091924401\n  0.0\n  0.0","category":"page"},{"location":"examples/#Example-of-reeling-out-the-tether","page":"Examples_1p","title":"Example of reeling out the tether","text":"","category":"section"},{"location":"examples/","page":"Examples_1p","title":"Examples_1p","text":"include(\"examples/reel_out_1p.jl\")","category":"page"},{"location":"examples/","page":"Examples_1p","title":"Examples_1p","text":"(Image: Reel out 1p model)","category":"page"},{"location":"examples/","page":"Examples_1p","title":"Examples_1p","text":"In this example, we first keep the tether length constant and at 15 s start to reel out the winch with an acceleration of 0.1 m/s². At a set speed below 2.2 m/s the brake of the winch is active, therefore the \"jump\" in the v_reelout at the beginning of the reel-out phase.","category":"page"},{"location":"examples/","page":"Examples_1p","title":"Examples_1p","text":"It is not a real jump, but a high acceleration compared to the acceleration afterward.","category":"page"},{"location":"advanced/","page":"Advanced usage","title":"Advanced usage","text":"CurrentModule = KiteModels","category":"page"},{"location":"advanced/#Advanced-usage","page":"Advanced usage","title":"Advanced usage","text":"","category":"section"},{"location":"advanced/","page":"Advanced usage","title":"Advanced usage","text":"For advanced users it is suggested to install git, bash and vscode or vscodium in addition to Julia. vscode and vscodium both have a very good plugin for Julia support, see https://www.julia-vscode.org. Installation instructions: Julia and VSCode .","category":"page"},{"location":"advanced/","page":"Advanced usage","title":"Advanced usage","text":"Whe using vscode, I do NOT use the Julia terminal provided by vscode, but the normal bash terminal which is also available in vscode by selecting Terminal->New Terminal From this terminal I start Julia with julia --project or a different command as explained below. This makes it easier to understand what happens and is also faster when you need to restart.","category":"page"},{"location":"advanced/#Forking-the-repository-and-creating-a-custom-system-image","page":"Advanced usage","title":"Forking the repository and creating a custom system image","text":"","category":"section"},{"location":"advanced/","page":"Advanced usage","title":"Advanced usage","text":"To reduce the startup time it is suggested to use a custom system image that contains all the packages you use on a daily base in compiled form.","category":"page"},{"location":"advanced/","page":"Advanced usage","title":"Advanced usage","text":"Go to the website https://github.com/ufechner7/KiteModels.jl and click on the Fork button at the top right.\nclone the new repository which is owned by you with a command similar to this one: git clone https://github.com/ufechner7/KiteModels.jl Your own git user name must appear in the URL, otherwise you will not be able to push your changes.","category":"page"},{"location":"advanced/","page":"Advanced usage","title":"Advanced usage","text":"After cloning the repo you can create a new system image:","category":"page"},{"location":"advanced/","page":"Advanced usage","title":"Advanced usage","text":"cd KiteModels.jl\ncd bin\n./create_sys_image --update","category":"page"},{"location":"advanced/","page":"Advanced usage","title":"Advanced usage","text":"This will take about 6 min on a  Ryzen 7950X CPU. You should now see a new file in the bin folder:","category":"page"},{"location":"advanced/","page":"Advanced usage","title":"Advanced usage","text":"~/repos/test/bin$ ls -lah kps*\n-rwxrwxr-x 1 ufechner ufechner 723M apr 18 18:23 kps-image-1.10-main.so","category":"page"},{"location":"advanced/","page":"Advanced usage","title":"Advanced usage","text":"You can launch julia such that it makes use of this system image with the commands:","category":"page"},{"location":"advanced/","page":"Advanced usage","title":"Advanced usage","text":"cd ..\n./bin/run_julia","category":"page"},{"location":"advanced/","page":"Advanced usage","title":"Advanced usage","text":"If you now run any of the examples the time-to-first-plot (TTFP) should be less than 10s:","category":"page"},{"location":"advanced/","page":"Advanced usage","title":"Advanced usage","text":"julia> @time include(\"examples/simulate_simple.jl\")\nlift, drag  [N]: 597.47, 129.29\nAverage number of callbacks per time step: 83.8866\n  9.370429 seconds (17.95 M allocations: 1.359 GiB, 4.26% gc time, 50.76% compilation time: 26% of which was recompilation)\n\njulia> ","category":"page"},{"location":"advanced/","page":"Advanced usage","title":"Advanced usage","text":"A second run of this command needs about 3.6 s which means the startup time (load and compilation time of the package and the libraries) has been reduced to about 5.77s.","category":"page"},{"location":"advanced/","page":"Advanced usage","title":"Advanced usage","text":"Without a system image the first time execution of the script \"simulate_simple.jl\" on the same computer is about 16.4 seconds while the time for the second execution is the same (3.6s). So now about 7s of time are saved after each restart.","category":"page"},{"location":"advanced/#Hints-for-Developers","page":"Advanced usage","title":"Hints for Developers","text":"","category":"section"},{"location":"advanced/#Coding-style","page":"Advanced usage","title":"Coding style","text":"","category":"section"},{"location":"advanced/","page":"Advanced usage","title":"Advanced usage","text":"add the packages TestEnv and Revise to your global environment, not to any project\navoid hard-coded numeric values like 9.81 in the code, instead define a global constant G_EARTH or read this value from a configuration file\nstick to a line length limit of 120 characters\ntry to avoid dot operators unless you have to. ","category":"page"},{"location":"advanced/","page":"Advanced usage","title":"Advanced usage","text":"Bad: norm1        .~ norm(segment) Good: norm1        ~ norm(segment)","category":"page"},{"location":"advanced/","page":"Advanced usage","title":"Advanced usage","text":"if you need to refer to the settings you can use se() which will load the settings of the active project. To define the active project use a line like set = se(\"system_3l.yaml\") at the beginning of your program.\nuse the \\cdot operator for the dot product for improved readability\nuse a space after a comma, e.g. force_eqs[j, i]\nenclose operators like + and * in single spaces, like 0.5 * (s.pos[s.num_C] + s.pos[s.num_D]);   exception: mass_tether_particle[i-1]\ntry to align the equation signs for improved readability like this:","category":"page"},{"location":"advanced/","page":"Advanced usage","title":"Advanced usage","text":"    tether_rhs        = [force_eqs[j, i].rhs for j in 1:3]\n    kite_rhs          = [force_eqs[j, i+3].rhs for j in 1:3]\n    f_xy              = dot(tether_rhs, e_z) * e_z","category":"page"},{"location":"advanced/#Outlook","page":"Advanced usage","title":"Outlook","text":"","category":"section"},{"location":"advanced/","page":"Advanced usage","title":"Advanced usage","text":"The next steps:","category":"page"},{"location":"advanced/","page":"Advanced usage","title":"Advanced usage","text":"re-implement the KPS4 model using ModelingToolkit\nadd a Matlab/ Simulink wrapper similar to the Python wrapper pykitemodels","category":"page"},{"location":"examples_4p/","page":"Examples_4p","title":"Examples_4p","text":"CurrentModule = KiteModels","category":"page"},{"location":"examples_4p/#Examples-for-using-the-four-point-kite-model","page":"Examples_4p","title":"Examples for using the four point kite model","text":"","category":"section"},{"location":"examples_4p/#Create-a-test-project","page":"Examples_4p","title":"Create a test project","text":"","category":"section"},{"location":"examples_4p/","page":"Examples_4p","title":"Examples_4p","text":"mkdir test\ncd test\njulia --project=\".\"","category":"page"},{"location":"examples_4p/","page":"Examples_4p","title":"Examples_4p","text":"With the last command, we told Julia to create a new project in the current directory.","category":"page"},{"location":"examples_4p/","page":"Examples_4p","title":"Examples_4p","text":"Then we add the three required packages to our new project. By pressing the key \"]\" we enter the package manager mode where we can add or delete packages.","category":"page"},{"location":"examples_4p/","page":"Examples_4p","title":"Examples_4p","text":"]\nadd KiteUtils\nadd KitePodModels\nadd KiteModels\nst\n<BACKSPACE>","category":"page"},{"location":"examples_4p/","page":"Examples_4p","title":"Examples_4p","text":"The command \"st\" was not really required, but it is useful to display which versions of the packages we have in our project. Another important package manager command is the command \"up\", which updates all packages to the latest compatible versions.","category":"page"},{"location":"examples_4p/","page":"Examples_4p","title":"Examples_4p","text":"Then, copy the default configuration files and examples to your new project:","category":"page"},{"location":"examples_4p/","page":"Examples_4p","title":"Examples_4p","text":"using KiteModels\ncopy_settings()\ncopy_examples()","category":"page"},{"location":"examples_4p/","page":"Examples_4p","title":"Examples_4p","text":"The first command copies the files settings.yaml and system.yaml to the folder data. They can be customized later. The second command creates an examples folder with some examples.","category":"page"},{"location":"examples_4p/#Plotting-the-initial-state","page":"Examples_4p","title":"Plotting the initial state","text":"","category":"section"},{"location":"examples_4p/","page":"Examples_4p","title":"Examples_4p","text":"First, an instance of the model of the kite control unit (KCU) is created which is needed by the Kite Power System model KPS3. Then we create a kps instance, passing the kcu model as parameter. We need to declare these variables as const to achieve a decent performance.","category":"page"},{"location":"examples_4p/","page":"Examples_4p","title":"Examples_4p","text":"using KiteModels\nkcu::KCU = KCU(se())\nkps = KPS4(kcu)","category":"page"},{"location":"examples_4p/","page":"Examples_4p","title":"Examples_4p","text":"Then we call the function find_steady_state which uses a non-linear solver to find the solution for a given elevation angle, reel-out speed and wind speed. ","category":"page"},{"location":"examples_4p/","page":"Examples_4p","title":"Examples_4p","text":"find_steady_state!(kps, prn=true)","category":"page"},{"location":"examples_4p/","page":"Examples_4p","title":"Examples_4p","text":"Finding the steady state of the 4-point model is difficult and it only works when we artificially reduce the stiffness by a factor of 0.035. In the function init_sim! this factor is slowly increased to 1.0.","category":"page"},{"location":"examples_4p/","page":"Examples_4p","title":"Examples_4p","text":"To plot the result in 2D we extract the vectors of the x and z coordinates of the tether particles with a for loop:","category":"page"},{"location":"examples_4p/","page":"Examples_4p","title":"Examples_4p","text":"x = Float64[] \nz = Float64[]\nfor i in 1:length(kps.pos)\n     push!(x, kps.pos[i][1])\n     push!(z, kps.pos[i][3])\nend","category":"page"},{"location":"examples_4p/","page":"Examples_4p","title":"Examples_4p","text":"And finally, we plot the position of the particles in the x-z plane. When you type using ControlPlots you will be asked if you want to install the ControlPlots package. Just press \\<ENTER\\> and it gets installed.","category":"page"},{"location":"examples_4p/","page":"Examples_4p","title":"Examples_4p","text":"using ControlPlots\nplot(x,z, xlabel=\"x [m]\", ylabel=\"z [m]\", scatter=true)","category":"page"},{"location":"examples_4p/#Initial-State","page":"Examples_4p","title":"Initial State","text":"","category":"section"},{"location":"examples_4p/","page":"Examples_4p","title":"Examples_4p","text":"(Image: Initial State)","category":"page"},{"location":"examples_4p/#Print-other-model-outputs","page":"Examples_4p","title":"Print other model outputs","text":"","category":"section"},{"location":"examples_4p/","page":"Examples_4p","title":"Examples_4p","text":"Print the vector of the positions of the particles:","category":"page"},{"location":"examples_4p/","page":"Examples_4p","title":"Examples_4p","text":"julia> kps.pos\n11-element StaticArrays.SVector{11, StaticArrays.MVector{3, Float64}} with indices SOneTo(11):\n [0.0, 0.0, 0.0]\n [9.179237622840555, 0.0, 23.842235605018427]\n [18.04995989861643, 0.0, 47.800963572571995]\n [26.562156210544767, 0.0, 71.88939923189402]\n [34.68610302268368, 0.0, 96.11152960655927]\n [42.39897331360162, 0.0, 120.4676716318371]\n [49.681585065247006, 0.0, 144.95590371155842]\n [50.19560621291923, 0.0, 150.01396766608025]\n [51.447158096922415, 0.0, 152.22064860101747]\n [51.269841233250816, 2.823293379900761, 149.7849943282592]\n [51.269841233250816, -2.823293379900761, 149.7849943282592]\n","category":"page"},{"location":"examples_4p/","page":"Examples_4p","title":"Examples_4p","text":"Print the unstretched and stretched tether length and the height of the kite:","category":"page"},{"location":"examples_4p/","page":"Examples_4p","title":"Examples_4p","text":"julia> unstretched_length(kps)\n150.0\n\njulia> tether_length(kps)\n153.28916318946136\n\njulia> calc_height(kps)\n152.22064860101747","category":"page"},{"location":"examples_4p/","page":"Examples_4p","title":"Examples_4p","text":"Because of the the stiffness_factor of 0.035 we have a longer tether-length then when using the 1 point kite model. ","category":"page"},{"location":"examples_4p/","page":"Examples_4p","title":"Examples_4p","text":"Print the force at the winch (groundstation, in Newton) and at each tether segment:","category":"page"},{"location":"examples_4p/","page":"Examples_4p","title":"Examples_4p","text":"julia> winch_force(kps)\n471.70242280223385\n\njulia> spring_forces(kps)\n15-element Vector{Float64}:\n 471.6945339755092\n 471.690450982437\n 471.6880774303635\n 471.68627774821994\n 471.68477542957345\n 471.68345917403485\n  95.87508612176553\n -58.70207142208335\n -50.06490404375146\n 226.23422847228494\n 215.8389386786939\n 215.8389386786939\n 226.23422847228494\n -58.70207142208335\n  99.72953663093385","category":"page"},{"location":"examples_4p/","page":"Examples_4p","title":"Examples_4p","text":"Some of the forces are negative which means the segments are getting compressed. This is acceptable for the kite itself (not for the tether).","category":"page"},{"location":"examples_4p/","page":"Examples_4p","title":"Examples_4p","text":"Print the lift and drag forces of the kite (in Newton) and the lift-over-drag ratio:","category":"page"},{"location":"examples_4p/","page":"Examples_4p","title":"Examples_4p","text":"julia> lift, drag = lift_drag(kps)\n(382.18880762331327, 117.58827293691883)\n\njulia> lift_over_drag(kps)\n3.250228939312184","category":"page"},{"location":"examples_4p/","page":"Examples_4p","title":"Examples_4p","text":"Print the wind speed vector at the kite:","category":"page"},{"location":"examples_4p/","page":"Examples_4p","title":"Examples_4p","text":"julia> v_wind_kite(kps)\n3-element StaticArrays.MVector{3, Float64} with indices SOneTo(3):\n 12.542508333667467\n  0.0\n  0.0","category":"page"},{"location":"examples_4p/#Example-of-reeling-out-the-tether","page":"Examples_4p","title":"Example of reeling out the tether","text":"","category":"section"},{"location":"examples_4p/","page":"Examples_4p","title":"Examples_4p","text":"include(\"examples/reel_out_4p.jl\")","category":"page"},{"location":"examples_4p/","page":"Examples_4p","title":"Examples_4p","text":"(Image: Reel out 4p model)","category":"page"},{"location":"examples_4p/","page":"Examples_4p","title":"Examples_4p","text":"In this example, we first keep the tether length constant and at 15 s start to reel out the winch with an acceleration of 0.1 m/s². At a set speed below 2.2 m/s the brake of the winch is active, therefore the \"jump\" in the v_reelout at  the beginning of the reel-out phase.","category":"page"},{"location":"examples_4p/","page":"Examples_4p","title":"Examples_4p","text":"It is not a real jump, but a high acceleration compared to the acceleration afterward.","category":"page"},{"location":"","page":"Home","title":"Home","text":"CurrentModule = KiteModels","category":"page"},{"location":"#KiteModels","page":"Home","title":"KiteModels","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Documentation for the package KiteModels.","category":"page"},{"location":"","page":"Home","title":"Home","text":"The model has the following subcomponents, implement in separate packages:","category":"page"},{"location":"","page":"Home","title":"Home","text":"AtmosphericModel from AtmosphericModels\nWinchModel from WinchModels \nKitePodModel from  KitePodModels","category":"page"},{"location":"","page":"Home","title":"Home","text":"This package is part of Julia Kite Power Tools, which consist of the following packages:","category":"page"},{"location":"","page":"Home","title":"Home","text":"(Image: Julia Kite Power Tools)","category":"page"},{"location":"#What-to-install","page":"Home","title":"What to install","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"If you want to run simulations and see the results in 3D, please install the meta package  KiteSimulators which contains all other packages. If you are not interested in 3D visualization or control you can just install this package. When you have installed the package KiteSimulators, use the command using KiteSimulators instead of using KiteModels when this is mentioned in the documentation.","category":"page"},{"location":"#Installation","page":"Home","title":"Installation","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Install Julia 1.10 or later, if you haven't already. On Linux, make sure that Python3 and Matplotlib are installed:","category":"page"},{"location":"","page":"Home","title":"Home","text":"sudo apt install python3-matplotlib","category":"page"},{"location":"","page":"Home","title":"Home","text":"Before installing this software it is suggested to create a new project, for example like this:","category":"page"},{"location":"","page":"Home","title":"Home","text":"mkdir test\ncd test\njulia --project=\".\"","category":"page"},{"location":"","page":"Home","title":"Home","text":"Then add KiteModels from  Julia's package manager, by typing:","category":"page"},{"location":"","page":"Home","title":"Home","text":"using Pkg\npkg\"add KiteModels\"","category":"page"},{"location":"","page":"Home","title":"Home","text":"at the Julia prompt. You can run the unit tests with the command:","category":"page"},{"location":"","page":"Home","title":"Home","text":"pkg\"test KiteModels\"","category":"page"},{"location":"","page":"Home","title":"Home","text":"You can copy the examples to your project with:","category":"page"},{"location":"","page":"Home","title":"Home","text":"using KiteModels\nKiteModels.install_examples()","category":"page"},{"location":"","page":"Home","title":"Home","text":"This also adds the extra packages, needed for the examples to the project. Furthermore, it creates a folder data with some example input files. You can now run the examples with the command:","category":"page"},{"location":"","page":"Home","title":"Home","text":"include(\"examples/menu.jl\")","category":"page"},{"location":"#News","page":"Home","title":"News","text":"","category":"section"},{"location":"#November-2024","page":"Home","title":"November 2024","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"the four point kite model KPS4 was extended to include aerodynamic damping of pitch oscillations; for this purpose, the parameters cmq and cord_length must be defined in settings.yaml\nthe four point kite model KPS4 was extended to include the impact of the deformation of the kite on the turn rate; for this, the parameter smc must be defined in settings.yaml","category":"page"},{"location":"#October-2024","page":"Home","title":"October 2024","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"the orientation is now represented with respect to the NED reference frame\nazimuth is now calculated in wind reference frame. This allows it to handle changes of the wind direction during flight correctly.\nmany unit tests added by a new contributor\nmany tests for model verification added; they can be accessed using the menu2.jl script\nthe documentation was improved","category":"page"},{"location":"#August-2024","page":"Home","title":"August 2024","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"a new kite model, KPS3_3L was contributed. It uses three lines to the ground and three winches for steering a ram-air foil kite.\na first ModelingToolkit based model was added, which shows a much better performance and easier to read code\na new KCU model was added which assumes a linear relationship between the depower settings and the depower angle and thus is easier to configure than the original model.\nthe drag of the KCU is now taken into account\nthe drag of the bridle is now taken into account correctly, also if the real kite has more bridle lines than the model\nthe function to find the initial state is now much more robust","category":"page"},{"location":"#July-2024","page":"Home","title":"July 2024","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"a new groundstation / winch type is now supported, the TorqueControlledMachine. It can be configured in the section winch of the settings.yaml file. It uses a set torque as input.\na Python interface is now provided, see: pykitemodels","category":"page"},{"location":"#April-2024","page":"Home","title":"April 2024","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"added support for the native Julia DAE solver DFBDF. It is much more accurate and faster than the IDA solver that was used before.","category":"page"},{"location":"#Provides","page":"Home","title":"Provides","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"The type AbstractKiteModel with the implementation KPS3, KPS4 and KPS4_3L, representing the one point, the four point kite model and the four point - three lines model, together with the high level simulation interface consisting of the functions init_sim! and next_step!. Other kite models can be added inside or outside of this package by implementing the non-generic methods required for an AbstractKiteModel.","category":"page"},{"location":"","page":"Home","title":"Home","text":"Additional functions to provide inputs and outputs of the model on each time step. In particular the constructor SysState can be called once per time step to create a SysState struct for logging or for displaying the state in a viewer. Per time step the residual! function is called as many times as needed to find the solution at the end of the time step. The formulas are based on basic physics and aerodynamics and can be quite simple because a differential algebraic notation is used.","category":"page"},{"location":"","page":"Home","title":"Home","text":"(Image: Four point kite power system model)","category":"page"},{"location":"#Reference-frames-and-control-inputs","page":"Home","title":"Reference frames and control inputs","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"a positive set_torque will accelerate the reel-out, a negative set_torque counteract the pulling force of the kite. The unit is [N/m] as seen at the motor/generator axis.\nthe depower settings are dimensionless and can be between zero and one. A value equal to mathrmdepower_zero100 from the settings.yaml file means that the kite is fully powered. \nthe heading angle, the direction the nose of the kite is pointing to is positive in clockwise direction when seen from above.\nthe steering input, dimensionless and in the range of -1.0 .. 1.0. A positive steering input causes a positive turn rate (derivative of the heading).","category":"page"},{"location":"","page":"Home","title":"Home","text":"A definition of the reference frames can be found here .","category":"page"},{"location":"#Further-reading","page":"Home","title":"Further reading","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"The one point and four point kite models are described in detail in Dynamic Model of a Pumping Kite Power System.","category":"page"},{"location":"#See-also","page":"Home","title":"See also","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Research Fechner for the scientic background of this code\nThe meta-package  KiteSimulators\nthe package KiteUtils\nthe packages WinchModels and KitePodModels and AtmosphericModels\nthe packages KiteControllers and KiteViewers","category":"page"},{"location":"","page":"Home","title":"Home","text":"Authors: Uwe Fechner (uwe.fechner.msc@gmail.com) and Bart van de Lint","category":"page"},{"location":"parameters/","page":"Parameters","title":"Parameters","text":"CurrentModule = KiteModels","category":"page"},{"location":"parameters/#Configuration","page":"Parameters","title":"Configuration","text":"","category":"section"},{"location":"parameters/","page":"Parameters","title":"Parameters","text":"To configure the parameters of the kite models, edit the file data/settings.yaml, or create a copy under a different name and change the name of the active configuration in the file data/system.yaml.","category":"page"},{"location":"parameters/#Parameters","page":"Parameters","title":"Parameters","text":"","category":"section"},{"location":"parameters/","page":"Parameters","title":"Parameters","text":"The following parameters are used by this package:","category":"page"},{"location":"parameters/","page":"Parameters","title":"Parameters","text":"system:\n    log_file: \"data/log_8700W_8ms\" # filename without extension  [replay only]\n                                   #   use / as path delimiter, even on Windows \n    log_level:      2              # 0: no logging \n    time_lapse:   1.0              # relative replay speed\n    sim_time:   100.0              # simulation time             [sim only]\n    segments:       6              # number of tether segments\n    sample_freq:   20              # sample frequency in Hz\n    zoom:        0.03              # zoom factor for the system view\n    kite_scale:   3.0              # relative zoom factor for the 4 point kite\n    fixed_font: \"\"                 # name or filepath+filename of alternative fixed pitch font, e.g. Liberation Mono\n\ninitial:\n    l_tether: 150.0        # initial tether length       [m]\n    elevation: 70.8        # initial elevation angle   [deg]\n    v_reel_out: 0.0        # initial reel out speed    [m/s]\n    depower:   25.0        # initial depower settings    [%]\n\nsolver:\n    abs_tol: 0.0006        # absolute tolerance of the DAE solver [m, m/s]\n    rel_tol: 0.001         # relative tolerance of the DAE solver [-]\n    solver: \"DFBDF\"        # DAE solver, IDA or DFBDF or DImplicitEuler\n    linear_solver: \"GMRES\" # can be GMRES or LapackDense or Dense (only for IDA)\n    max_order: 4           # maximal order, usually between 3 and 5 (IDA and DFBDF)\n    max_iter:  200         # max number of iterations of the steady-state-solver\n\nsteering:\n    c0:       0.0          # steering offset   -0.0032           [-]\n    c_s:      2.59         # steering coefficient one point model; 2.59 was 0.6\n    c2_cor:   0.93         # correction factor one point model\n    k_ds:     1.5          # influence of the depower angle on the steering sensitivity\n    delta_st: 0.02         # steering increment (when pressing RIGHT)\n    max_steering: 16.834   # max. steering angle of the side planes for four point model [degrees]\n    cs_4p:  1.0            # correction factor for the steering coefficient of the four point model\n\ndepower:\n    alpha_d_max:    31.0   # max depower angle                            [deg]\n    depower_offset: 23.6   # at rel_depower=0.236 the kite is fully powered [%]\n\nkite:\n    model: \"data/kite.obj\" # 3D model of the kite\n    physical_model: \"KPS4\" # name of the kite model to use (KPS3 or KPS4)\n    version: 1             # version of the model to use\n    mass:  6.2             # kite mass incl. sensor unit [kg]\n    area: 10.18            # projected kite area         [m²]\n    rel_side_area: 30.6    # relative side area           [%]\n    height: 2.23           # height of the kite           [m]\n    alpha_cl:  [-180.0, -160.0, -90.0, -20.0, -10.0,  -5.0,  0.0, 20.0, 40.0, 90.0, 160.0, 180.0]\n    cl_list:   [   0.0,    0.5,   0.0,  0.08, 0.125,  0.15,  0.2,  1.0,  1.0,  0.0,  -0.5,   0.0]\n    alpha_cd:  [-180.0, -170.0, -140.0, -90.0, -20.0, 0.0, 20.0, 90.0, 140.0, 170.0, 180.0]\n    cd_list:   [   0.5,    0.5,    0.5,   1.0,   0.2, 0.1,  0.2,  1.0,   0.5,   0.5,   0.5]\n\nkps4:\n    width:         5.77     # width of the kite                      [m]\n    alpha_zero:    4.0      # should be 4 .. 10                [degrees]\n    alpha_ztip:   10.0      #                                  [degrees]\n    m_k:           0.2      # relative nose distance; increasing m_k increases C2 of the turn-rate law\n    rel_nose_mass: 0.47     # relative nose mass\n    rel_top_mass:  0.4      # mass of the top particle relative to the sum of top and side particles\n\nkps4_3l:\n    radius: 2.0                     # the radius of the circle shape on which the kite lines, viewed \n                                    #     from the front                                              [m]\n    bridle_center_distance: 4.0     # the distance from point the center bridle connection point of \n                                    #     the middle line to the kite                                 [m]\n    middle_length:          1.5     # the cord length of the kite in the middle                       [m]\n    tip_length:             0.62    # the cord length of the kite at the tips                         [m]\n    min_steering_line_distance: 1.0 # the distance between the left and right steering bridle         [m]\n                                    #     line connections on the kite that are closest to each other [m]\n    width_3l:               4.1     # width of the kite                                               [m]\n    aero_surfaces:          3       # the number of aerodynamic surfaces to use per mass point        [-]\n    \nbridle:\n    d_line:    2.5            # bridle line diameter                                                 [mm]\n    l_bridle: 33.4            # sum of the lengths of the bridle lines                                [m]\n    h_bridle:  4.9            # height of bridle                                                      [m]\n    rel_compr_stiffness: 0.25 # relative compression stiffness of the kite springs                    [-]\n    rel_damping: 6.0          # relative damping of the kite spring (relative to main tether)         [-]\n\nkcu:\n    kcu_model: \"KCU1\"            # name of the kite control unit model, KCU1 or KCU2\n    kcu_mass: 8.4                # mass of the kite control unit                       [kg]\n    kcu_diameter: 0.4            # diameter of the KCU for drag calculation            [m]\n    power2steer_dist: 1.3        #                                                     [m]\n    depower_drum_diameter: 0.069 #                                                     [m]\n    tape_thickness: 0.0006       #                                                     [m]\n    v_depower: 0.075             # max velocity of depowering in units per second (full range: 1 unit)\n    v_steering: 0.2              # max velocity of steering in units per second   (full range: 2 units)\n    depower_gain: 3.0            # 3.0 means: more than 33% error -> full speed\n    steering_gain: 3.0\n\ntether:\n    d_tether:  4           # tether diameter                 [mm]\n    cd_tether: 0.958       # drag coefficient of the tether\n    damping: 473.0         # unit damping coefficient        [Ns]\n    c_spring: 614600.0     # unit spring constant coefficient [N]\n    rho_tether:  724.0     # density of Dyneema           [kg/m³]\n    e_tether: 55000000000.0 # axial tensile modulus of Dyneema (M.B. Ruppert) [Pa]\n                           # SK75: 109 to 132 GPa according to datasheet\n\nwinch:\n    winch_model: \"AsyncMachine\" # or TorqueControlledMachine\n    max_force: 4000        # maximal (nominal) tether force; short overload allowed [N]\n    v_ro_max:  8.0         # maximal reel-out speed                          [m/s]\n    v_ro_min: -8.0         # minimal reel-out speed (=max reel-in speed)     [m/s]\n    drum_radius: 0.1615    # radius of the drum                              [m]\n    gear_ratio: 6.2        # gear ratio of the winch                         [-]   \n    inertia_total: 0.204   # total inertia, as seen from the motor/generator [kgm²]\n    f_coulomb: 122.0       # coulomb friction                                [N]\n    c_vf: 30.6             # coefficient for the viscous friction            [Ns/m]\n\nenvironment:\n    v_wind: 9.51             # wind speed at reference height          [m/s]\n    v_wind_ref: [9.51, 0.0]  # wind speed vector at reference height   [m/s]\n    temp_ref: 15.0           # temperature at reference height         [°C]\n    height_gnd: 0.0          # height of groundstation above see level [m]\n    h_ref:  6.0              # reference height for the wind speed     [m]\n\n    rho_0:  1.225            # air density at zero height and 15 °C    [kg/m³]\n    alpha:  0.08163          # exponent of the wind profile law\n    z0:     0.0002           # surface roughness                       [m]\n    profile_law: 3           # 1=EXP, 2=LOG, 3=EXPLOG, 4=FAST_EXP, 5=FAST_LOG, 6=FAST_EXPLOG\n    # the following parameters are for calculating the turbulent wind field using the Mann model\n    use_turbulence: 0.0      # turbulence intensity relative to Cabauw, NL\n    v_wind_gnds: [3.483, 5.324, 8.163] # wind speeds at ref height for calculating the turbulent wind field [m/s]\n    avg_height: 200.0        # average height during reel out          [m]\n    rel_turbs:   [0.342, 0.465, 0.583] # relative turbulence at the v_wind_gnds\n    i_ref: 0.14              # is the expected value of the turbulence intensity at 15 m/s.\n    v_ref: 42.9              # five times the average wind speed in m/s at hub height over the full year    [m/s]\n                             # Cabauw: 8.5863 m/s * 5.0 = 42.9 m/s\n    height_step: 2.0         # use a grid with 2m resolution in z direction                                 [m]\n    grid_step:   2.0         # grid resolution in x and y direction                                         [m]               ","category":"page"},{"location":"types/#Exported-Types","page":"Types","title":"Exported Types","text":"","category":"section"},{"location":"types/","page":"Types","title":"Types","text":"CurrentModule = KiteModels","category":"page"},{"location":"types/#Basic-types","page":"Types","title":"Basic types","text":"","category":"section"},{"location":"types/","page":"Types","title":"Types","text":"SimFloat\nKVec3\nSVec3\nAbstractKiteModel\nAKM","category":"page"},{"location":"types/#KiteModels.SimFloat","page":"Types","title":"KiteModels.SimFloat","text":"const SimFloat = Float64\n\nThis type is used for all real variables, used in the Simulation. Possible alternatives: Float32, Double64, Dual Other types than Float64 or Float32 do require support of Julia types by the solver. \n\n\n\n\n\n","category":"type"},{"location":"types/#KiteModels.KVec3","page":"Types","title":"KiteModels.KVec3","text":"const KVec3    = MVector{3, SimFloat}\n\nBasic 3-dimensional vector, stack allocated, mutable.\n\n\n\n\n\n","category":"type"},{"location":"types/#KiteModels.SVec3","page":"Types","title":"KiteModels.SVec3","text":"const SVec3    = SVector{3, SimFloat}\n\nBasic 3-dimensional vector, stack allocated, immutable.\n\n\n\n\n\n","category":"type"},{"location":"types/#KiteModels.AbstractKiteModel","page":"Types","title":"KiteModels.AbstractKiteModel","text":"abstract type AbstractKiteModel\n\nAll kite models must inherit from this type. All methods that are defined on this type must work with all kite models. All exported methods must work on this type. \n\n\n\n\n\n","category":"type"},{"location":"types/#KiteModels.AKM","page":"Types","title":"KiteModels.AKM","text":"const AKM = AbstractKiteModel\n\nShort alias for the AbstractKiteModel. \n\n\n\n\n\n","category":"type"},{"location":"types/#Struct-KPS3-and-KPS4-and-KPS4_3L","page":"Types","title":"Struct KPS3 and KPS4 and KPS4_3L","text":"","category":"section"},{"location":"types/","page":"Types","title":"Types","text":"KPS3\nKPS4\nKPS4_3L","category":"page"},{"location":"types/#KiteModels.KPS3","page":"Types","title":"KiteModels.KPS3","text":"mutable struct KPS3{S, T, P} <: AbstractKiteModel\n\nState of the kite power system. Parameters:\n\nS: Scalar type, e.g. SimFloat In the documentation mentioned as Any, but when used in this module it is always SimFloat and not Any.\nT: Vector type, e.g. MVector{3, SimFloat}\nP: number of points of the system, segments+1\n\nNormally a user of this package will not have to access any of the members of this type directly, use the input and output functions instead.\n\nset::Settings: Reference to the settings struct\nkcu::KCU: Reference to the KCU model (Kite Control Unit as implemented in the package KitePodModels\nam::AtmosphericModel: Reference to the atmospheric model as implemented in the package AtmosphericModels Default: AtmosphericModel()\nwm::Union{Nothing, AbstractWinchModel}: Reference to winch model as implemented in the package WinchModels Default: nothing\niter::Int64: Iterations, number of calls to the function residual! Default: 0\ncalc_cl::Dierckx.Spline1D: Function for calculation the lift coefficent, using a spline based on the provided value pairs.\ncalc_cd::Dierckx.Spline1D: Function for calculation the drag coefficent, using a spline based on the provided value pairs.\nv_wind::Any: wind vector at the height of the kite Default: zeros(S, 3)\nv_wind_gnd::Any: wind vector at reference height Default: zeros(S, 3)\nv_wind_tether::Any: wind vector used for the calculation of the tether drag Default: zeros(S, 3)\nv_apparent::Any: apparent wind vector at the kite Default: zeros(S, 3)\nv_app_perp::Any: vector, perpendicular to vapparent; output of calcdrag Default: zeros(S, 3)\nalpha_2::Any: angle of attack of the kite; output of setclcd! Default: 0.0\ndrag_force::Any: drag force of kite and bridle; output of calcaeroforces Default: zeros(S, 3)\nlift_force::Any: lift force of the kite; output of calcaeroforces Default: zeros(S, 3)\nsteering_force::Any: steering force acting on the kite; output of calcaeroforces Default: zeros(S, 3)\nlast_force::Any: Default: zeros(S, 3)\nspring_force::Any: spring force of the current tether segment, output of calc_res Default: zeros(S, 3)\ntotal_forces::Any: Default: zeros(S, 3)\nforce::Any: sum of spring and drag forces acting on the current segment, output of calc_res Default: zeros(S, 3)\nunit_vector::Any: unit vector in the direction of the current tether segment, output of calc_res Default: zeros(S, 3)\nav_vel::Any: average velocity of the current tether segment, output of calc_res Default: zeros(S, 3)\nkite_y::Any: y-vector of the kite fixed referense frame, output of calcaeroforces Default: zeros(S, 3)\nsegment::Any: vector representing one tether segment (p1-p2) Default: zeros(S, 3)\nlast_tether_drag::Any: vector of the drag force of the last calculated tether segment Default: zeros(S, 3)\nvec_z::Any: z vector of the kite reference frame Default: zeros(S, 3)\nres1::StaticArraysCore.SVector{P, StaticArraysCore.MVector{3, Float64}} where P: part one of the residual, difference between pos' and vel, non-flat, mainly for unit testing Default: zeros(SVector{P, KVec3})\nres2::StaticArraysCore.SVector{P, StaticArraysCore.MVector{3, Float64}} where P: part two of the residual, difference between vel' and acc, non-flat, mainly for unit testing Default: zeros(SVector{P, KVec3})\npos::StaticArraysCore.SVector{P, StaticArraysCore.MVector{3, Float64}} where P: vector of the positions of the particles Default: zeros(SVector{P, KVec3})\nvel_kite::Any: velocity vector of the kite Default: zeros(S, 3)\nseg_area::Any: area of one tether segment [m²] Default: zero(S)\nbridle_area::Any: total actual bridle area [m²] Default: zero(S)\nc_spring::Any: spring constant, depending on the length of the tether segment Default: zero(S)\nsegment_length::Any: unstressed segment length [m] Default: 0.0\ndamping::Any: damping factor, depending on the length of the tether segment Default: zero(S)\nlast_v_app_norm_tether::Any: last norm of the apparent wind speed at a tether segment [m/s] Default: zero(S)\nparam_cl::Any: lift coefficient of the kite, depending on the angle of attack Default: 0.2\nparam_cd::Any: drag coefficient of the kite, depending on the angle of attack Default: 1.0\ncor_steering::Any: correction term for the steering, in paper named i_(s,c), Eq. 30 Default: zero(S)\npsi::Any: azimuth angle in radian; inital value is zero Default: zero(S)\nbeta::Any: elevation angle in radian; initial value about 70 degrees Default: deg2rad((se()).elevation)\nalpha_depower::Any: depower angle [deg] Default: 0.0\nt_0::Any: relative start time of the current time interval Default: 0.0\nv_reel_out::Any: reel out speed of the winch [m/s] Default: 0.0\nlast_v_reel_out::Any: reel out speed during the last time step Default: 0.0\nl_tether::Any: unstretched tether length Default: 0.0\nrho::Any: air density at the height of the kite Default: 0.0\ndepower::Any: actual relative depower setting,  must be between    0 .. 1.0 Default: 0.0\nsteering::Any: actual relative steering setting, must be between -1.0 .. 1.0 Default: 0.0\nstiffness_factor::Any: factor for the tether stiffness, used to find the steady state with a low stiffness first Default: 1.0\ninitial_masses::StaticArraysCore.MVector{P, S} where {S, P}: initial masses of the point masses Default: ones(P)\nmasses::StaticArraysCore.MVector{P, S} where {S, P}: current masses, depending on the total tether length Default: ones(P)\nforces::StaticArraysCore.SVector{P, StaticArraysCore.MVector{3, Float64}} where P: vector of the forces, acting on the particles Default: zeros(SVector{P, KVec3})\nsync_speed::Union{Nothing, S} where S: synchronous speed of the motor/ generator Default: 0.0\nset_torque::Union{Nothing, S} where S: set_torque of the motor/generator Default: nothing\n\n\n\n\n\n","category":"type"},{"location":"types/#KiteModels.KPS4","page":"Types","title":"KiteModels.KPS4","text":"mutable struct KPS4{S, T, P, Q, SP} <: AbstractKiteModel\n\nState of the kite power system, using a 4 point kite model. Parameters:\n\nS: Scalar type, e.g. SimFloat In the documentation mentioned as Any, but when used in this module it is always SimFloat and not Any.\nT: Vector type, e.g. MVector{3, SimFloat}\nP: number of points of the system, segments+1\nQ: number of springs in the system, P-1\nSP: struct type, describing a spring\n\nNormally a user of this package will not have to access any of the members of this type directly, use the input and output functions instead.\n\nset::Settings: Reference to the settings struct\nkcu::KCU: Reference to the KCU model (Kite Control Unit as implemented in the package KitePodModels\nam::AtmosphericModel: Reference to the atmospheric model as implemented in the package AtmosphericModels Default: AtmosphericModel()\nwm::AbstractWinchModel: Reference to winch model as implemented in the package WinchModels\niter::Int64: Iterations, number of calls to the function residual! Default: 0\ncalc_cl::Dierckx.Spline1D: Function for calculation the lift coefficent, using a spline based on the provided value pairs.\ncalc_cd::Dierckx.Spline1D: Function for calculation the drag coefficent, using a spline based on the provided value pairs.\nv_wind::Any: wind vector at the height of the kite Default: zeros(S, 3)\nv_wind_gnd::Any: wind vector at reference height Default: zeros(S, 3)\nv_wind_tether::Any: wind vector used for the calculation of the tether drag Default: zeros(S, 3)\nv_apparent::Any: apparent wind vector at the kite Default: zeros(S, 3)\nbridle_factor::Any: bridlefactor = set.lbridle/bridle_length(set) Default: 1.0\nside_cl::Any: side lift coefficient, the difference of the left and right lift coeficients Default: 0.0\ndrag_force::Any: drag force of kite and bridle; output of calcaeroforces! Default: zeros(S, 3)\nside_force::Any: side_force acting on the kite Default: zeros(S, 3)\nks::Any: max_steering angle in radian Default: 0.0\nlift_force::Any: lift force of the kite; output of calcaeroforces! Default: zeros(S, 3)\nspring_force::Any: spring force of the current tether segment, output of calcparticleforces! Default: zeros(S, 3)\nlast_force::Any: last winch force Default: zeros(S, 3)\nres1::StaticArraysCore.SVector{P, StaticArraysCore.MVector{3, Float64}} where P: a copy of the residual one (pos,vel) for debugging and unit tests Default: zeros(SVector{P, KVec3})\nres2::StaticArraysCore.SVector{P, StaticArraysCore.MVector{3, Float64}} where P: a copy of the residual two (vel,acc) for debugging and unit tests Default: zeros(SVector{P, KVec3})\npos::StaticArraysCore.SVector{P, StaticArraysCore.MVector{3, Float64}} where P: a copy of the actual positions as output for the user Default: zeros(SVector{P, KVec3})\nvel_kite::Any: velocity vector of the kite Default: zeros(S, 3)\nsegment_length::Any: unstressed segment length [m] Default: 0.0\nparam_cl::Any: lift coefficient of the kite, depending on the angle of attack Default: 0.2\nparam_cd::Any: drag coefficient of the kite, depending on the angle of attack Default: 1.0\npsi::Any: azimuth angle in radian; inital value is zero Default: zero(S)\nalpha_depower::Any: depower angle [deg] Default: 0.0\npitch::Any: pitch angle [rad] Default: 0.0\npitch_rate::Any: pitch rate [rad/s] Default: 0.0\nalpha_2::Any: aoa at paricle B Default: 0.0\nalpha_2b::Any: aoa at paricle B, corrected formula Default: 0.0\nalpha_3::Any: aoa at paricle C Default: 0.0\nalpha_3b::Any: Default: 0.0\nalpha_4::Any: aoa at paricle D Default: 0.0\nalpha_4b::Any: Default: 0.0\nt_0::Any: relative start time of the current time interval Default: 0.0\nv_reel_out::Any: reel out speed of the winch Default: 0.0\nlast_v_reel_out::Any: reel out speed at the last time step Default: 0.0\nl_tether::Any: unstretched tether length Default: 0.0\nrho::Any: air density at the height of the kite Default: 0.0\ndepower::Any: actual relative depower setting,  must be between    0 .. 1.0 Default: 0.0\nsteering::Any: actual relative steering setting, must be between -1.0 .. 1.0 Default: 0.0\nstiffness_factor::Any: multiplier for the stiffniss of tether and bridle Default: 1.0\ninitial_masses::StaticArraysCore.MVector{P, S} where {S, P}: initial masses of the point masses Default: ones(P)\nmasses::StaticArraysCore.MVector{P, S} where {S, P}: current masses, depending on the total tether length Default: zeros(P)\nsprings::StaticArraysCore.MVector: vector of the springs, defined as struct Default: zeros(SP, Q)\nforces::StaticArraysCore.SVector{P, StaticArraysCore.MVector{3, Float64}} where P: vector of the forces, acting on the particles Default: zeros(SVector{P, KVec3})\nsync_speed::Union{Nothing, S} where S: synchronous speed of the motor/ generator Default: 0.0\nset_torque::Union{Nothing, S} where S: set_torque of the motor/generator Default: nothing\nset_force::Union{Nothing, S} where S: set value of the force at the winch, for logging only Default: nothing\nx::Any: x vector of kite reference frame Default: zeros(S, 3)\ny::Any: y vector of kite reference frame Default: zeros(S, 3)\nz::Any: z vector of kite reference frame Default: zeros(S, 3)\n\n\n\n\n\n","category":"type"},{"location":"types/#KiteModels.KPS4_3L","page":"Types","title":"KiteModels.KPS4_3L","text":"mutable struct KPS4_3L{S, T, P, Q, SP} <: AbstractKiteModel\n\nState of the kite power system, using a 3 point kite model and three steering lines to the ground. Parameters:\n\nS: Scalar type, e.g. SimFloat In the documentation mentioned as Any, but when used in this module it is always SimFloat and not Any.\nT: Vector type, e.g. KVec3\nP: number of points of the system, segments+3\nQ: number of springs in the system, P-1\nSP: struct type, describing a spring\n\nNormally a user of this package will not have to access any of the members of this type directly, use the input and output functions instead.\n\nset::Settings: Reference to the settings struct\nset_hash::UInt64: Reference to the settings hash Default: 0\nlast_init_elevation::Any: The last initial elevation Default: 0.0\nlast_init_tether_length::Any: The last initial tether length Default: 0.0\nlast_set_hash::UInt64: Reference to the last settings hash Default: 0\nam::AtmosphericModel: Reference to the atmospheric model as implemented in the package AtmosphericModels Default: AtmosphericModel()\ncl_interp::Function: Function for calculating the lift coefficent, using linear interpolation based on the provided value pairs.\ncd_interp::Function: Function for calculating the drag coefficent, using linear interpolation based on the provided value pairs.\nc_te_interp::Function: Function for calculating the trailing edge force coefficient, using linear interpolation based on the provided value pairs.\nmotors::StaticArraysCore.SizedArray{Tuple{3}, AbstractWinchModel, N, M, TData} where {N, M, TData<:AbstractArray{AbstractWinchModel, M}}: Reference to the motor models as implemented in the package WinchModels. index 1: middle motor, index 2: left motor, index 3: right motor\niter::Int64: Iterations, number of calls to the function residual! Default: 0\nv_wind::Any: wind vector at the height of the kite Default: zeros(S, 3)\nv_wind_gnd::Any: wind vector at reference height Default: zeros(S, 3)\nv_wind_tether::Any: wind vector used for the calculation of the tether drag Default: zeros(S, 3)\nv_apparent::Any: apparent wind vector at the kite Default: zeros(S, 3)\nres1::StaticArraysCore.SVector{P, T} where {T, P}: a copy of the residual one (pos,vel) for debugging and unit tests Default: zeros(SVector{P, T})\nres2::StaticArraysCore.SVector{P, T} where {T, P}: a copy of the residual two (vel,acc) for debugging and unit tests Default: zeros(SVector{P, T})\npos::StaticArraysCore.SVector{P, T} where {T, P}: a copy of the actual positions as output for the user Default: zeros(SVector{P, T})\nvel::StaticArraysCore.SVector{P, T} where {T, P}: Default: zeros(SVector{P, T})\nsegment_lengths::Any: unstressed segment lengths of the three tethers [m] Default: zeros(S, 3)\npsi::Any: azimuth angle in radian; inital value is zero Default: zero(S)\nt_0::Any: relative start time of the current time interval Default: 0.0\ntether_lengths::Any: unstretched tether length Default: zeros(S, 3)\nrho::Any: air density at the height of the kite Default: 0.0\ndamping_coeff::Any: multiplier for the damping of all movement Default: 50.0\nmasses::StaticArraysCore.MVector{P, S} where {S, P}: current masses, depending on the total tether length Default: zeros(P)\nsprings::StaticArraysCore.MVector: vector of the springs, defined as struct Default: zeros(SP, Q)\nc_spring::Any: unit spring coefficient Default: zero(S)\ndamping::Any: unit damping coefficient Default: zero(S)\ntorque_control::Bool: whether or not to use torque control instead of speed control Default: false\ne_x::Any: x vector of kite reference frame Default: zeros(S, 3)\ne_y::Any: y vector of kite reference frame Default: zeros(S, 3)\ne_z::Any: z vector of kite reference frame Default: zeros(S, 3)\nnum_flap_C::Int64: Point number of C flap connection point Default: 0\nnum_flap_D::Int64: Point number of D flap connection point Default: 0\nnum_E::Int64: Point number of E Default: 0\nnum_C::Int64: Point number of C Default: 0\nnum_D::Int64: Point number of D Default: 0\nnum_A::Int64: Point number of A Default: 0\nα_l::Any: Angle of left tip Default: 0.0\nα_r::Any: Angle of right tip Default: 0.0\nα_C::Any: Angle of point C Default: 0.0\nkite_length_C::Any: Kite length at point C Default: 0.0\nsteady_sol::Union{Nothing, SciMLBase.NonlinearSolution}: Solution of the steady state problem Default: nothing\nsimple_sys::Union{Nothing, ModelingToolkit.ODESystem}: Simplified system of the mtk model Default: nothing\nvel_kite::Any: Velocity of the kite Default: zeros(S, 3)\ninit_set_values::Any: Initial torque or speed set values Default: zeros(S, 3)\nϵ::Any: Smooth sign constant Default: 0.001\nflap_damping::Any: Relative damping for flaps Default: 0.75\nv_wind_gnd_idx::Union{Nothing, ModelingToolkit.ParameterIndex}: Default: nothing\nv_wind_idx::Union{Nothing, ModelingToolkit.ParameterIndex}: Default: nothing\nprob::Union{Nothing, SciMLBase.ODEProblem}: Default: nothing\nset_set_values::Union{Nothing, SymbolicIndexingInterface.MultipleSetters}: Default: nothing\nget_pos::Union{Nothing, SymbolicIndexingInterface.MultipleGetters, SymbolicIndexingInterface.TimeDependentObservedFunction}: Default: nothing\nget_flap_angle::Union{Nothing, SymbolicIndexingInterface.MultipleGetters, SymbolicIndexingInterface.TimeDependentObservedFunction}: Default: nothing\nget_flap_acc::Union{Nothing, SymbolicIndexingInterface.MultipleGetters, SymbolicIndexingInterface.TimeDependentObservedFunction}: Default: nothing\nget_vel_kite::Union{Nothing, SymbolicIndexingInterface.MultipleGetters, SymbolicIndexingInterface.TimeDependentObservedFunction}: Default: nothing\nget_winch_forces::Union{Nothing, SymbolicIndexingInterface.MultipleGetters, SymbolicIndexingInterface.TimeDependentObservedFunction}: Default: nothing\nget_tether_lengths::Union{Nothing, SymbolicIndexingInterface.MultipleGetters, SymbolicIndexingInterface.TimeDependentObservedFunction}: Default: nothing\nget_tether_vels::Union{Nothing, SymbolicIndexingInterface.MultipleGetters, SymbolicIndexingInterface.TimeDependentObservedFunction}: Default: nothing\nget_L_C::Union{Nothing, SymbolicIndexingInterface.MultipleGetters, SymbolicIndexingInterface.TimeDependentObservedFunction}: Default: nothing\nget_L_D::Union{Nothing, SymbolicIndexingInterface.MultipleGetters, SymbolicIndexingInterface.TimeDependentObservedFunction}: Default: nothing\nget_D_C::Union{Nothing, SymbolicIndexingInterface.MultipleGetters, SymbolicIndexingInterface.TimeDependentObservedFunction}: Default: nothing\nget_D_D::Union{Nothing, SymbolicIndexingInterface.MultipleGetters, SymbolicIndexingInterface.TimeDependentObservedFunction}: Default: nothing\nget_heading::Union{Nothing, SymbolicIndexingInterface.MultipleGetters, SymbolicIndexingInterface.TimeDependentObservedFunction}: Default: nothing\nintegrator::Union{Nothing, OrdinaryDiffEqCore.ODEIntegrator, Sundials.CVODEIntegrator}: Default: nothing\nu0::Vector{Float64}: Default: [0.0]\n\n\n\n\n\n","category":"type"},{"location":"types/","page":"Types","title":"Types","text":"These structs store the state of the one point model and four point model. Only in unit tests it is allowed to access the members directly, otherwise use the input and output functions. The model KPS4_3L is not yet implemented, it is just a copy of KPS4.","category":"page"}]
}
