<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Functions · KiteModels.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://ufechner7.github.io/KiteModels.jl/functions/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="KiteModels.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">KiteModels.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../types/">Types</a></li><li class="is-active"><a class="tocitem" href>Functions</a><ul class="internal"><li><a class="tocitem" href="#Introduction"><span>Introduction</span></a></li><li><a class="tocitem" href="#Input-functions"><span>Input functions</span></a></li><li><a class="tocitem" href="#Output-functions"><span>Output functions</span></a></li><li><a class="tocitem" href="#High-level-simulation-interface"><span>High level simulation interface</span></a></li><li><a class="tocitem" href="#Low-level-simulation-interface"><span>Low level simulation interface</span></a></li><li><a class="tocitem" href="#Helper-functions"><span>Helper functions</span></a></li></ul></li><li><a class="tocitem" href="../parameters/">Parameters</a></li><li><a class="tocitem" href="../examples/">Examples_1p</a></li><li><a class="tocitem" href="../examples_4p/">Examples_4p</a></li><li><a class="tocitem" href="../quickstart/">Quickstart</a></li><li><a class="tocitem" href="../advanced/">Advanced usage</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Functions</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Functions</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/ufechner7/KiteModels.jl/blob/main/docs/src/functions.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h2 id="Introduction"><a class="docs-heading-anchor" href="#Introduction">Introduction</a><a id="Introduction-1"></a><a class="docs-heading-anchor-permalink" href="#Introduction" title="Permalink"></a></h2><p>Most of the functions work on a KPS3 or KPS4 object. For this, the variable s is used. Such a variable can be created with the lines:</p><pre><code class="language-julia hljs">using KiteSimulators
const s = KPS3(KCU(se()))</code></pre><p>Or, if you want to use the 4 point kite model:</p><pre><code class="language-julia hljs">using KiteSimulators
const s = KPS4(KCU(se()))</code></pre><p>Functions with an &quot;!&quot; as last character of the function name modify one of more of their parameters, in this context mostly the variable s.</p><h2 id="Input-functions"><a class="docs-heading-anchor" href="#Input-functions">Input functions</a><a id="Input-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Input-functions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="KiteModels.set_depower_steering!" href="#KiteModels.set_depower_steering!"><code>KiteModels.set_depower_steering!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">set_depower_steering!(s::AKM, depower, steering)</code></pre><p>Setter for the depower and steering model inputs. </p><p>Parameters:</p><ul><li>depower:   Relative depower,  must be between 0 .. 1.0</li><li>steering:  Relative steering, must be between -1.0 .. 1.0.  </li></ul><p>This function sets the variables s.depower, s.steering and s.alpha_depower. </p><p>It takes the depower offset c0 and the dependency of the steering sensitivity from the depower settings into account. The raw steering value is stored in s.kcu_steering.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KiteModels.jl#L153-L166">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="KiteModels.set_v_wind_ground!" href="#KiteModels.set_v_wind_ground!"><code>KiteModels.set_v_wind_ground!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">set_v_wind_ground!(s::AKM, height, v_wind_gnd=s.set.v_wind; upwind_dir=0.0)</code></pre><p>Set the vector of the wind-velocity at the height of the kite. As parameter the height, the ground wind speed [m/s] and the upwind direction [radians] are needed. Is called by the function next_step!.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KiteModels.jl#L212-L218">source</a></section></article><h2 id="Output-functions"><a class="docs-heading-anchor" href="#Output-functions">Output functions</a><a id="Output-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Output-functions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="KiteModels.unstretched_length" href="#KiteModels.unstretched_length"><code>KiteModels.unstretched_length</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">unstretched_length(s::AKM)</code></pre><p>Getter for the unstretched tether reel-out length (at zero force).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KiteModels.jl#L176-L180">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="KiteModels.tether_length" href="#KiteModels.tether_length"><code>KiteModels.tether_length</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">tether_length(s::AKM)</code></pre><p>Calculate and return the real, stretched tether length.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KiteModels.jl#L243-L247">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="KiteModels.pos_kite" href="#KiteModels.pos_kite"><code>KiteModels.pos_kite</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">pos_kite(s::KPS4)</code></pre><p>Return the position of the kite (top particle).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KPS4.jl#L550-L554">source</a></section><section><div><pre><code class="nohighlight hljs">pos_kite(s::KPS3)</code></pre><p>Return the position of the kite (top particle).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KPS3.jl#L269-L273">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="KiteModels.calc_height" href="#KiteModels.calc_height"><code>KiteModels.calc_height</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">calc_height(s::KPS4)</code></pre><p>Determine the height of the topmost kite particle above ground.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KPS4.jl#L541-L545">source</a></section><section><div><pre><code class="nohighlight hljs">calc_height(s::KPS3)</code></pre><p>Determine the height of the kite particle above ground.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KPS3.jl#L260-L264">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="KiteUtils.calc_elevation" href="#KiteUtils.calc_elevation"><code>KiteUtils.calc_elevation</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">calc_elevation(s::AKM)</code></pre><p>Determine the elevation angle of the kite in radian.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KiteModels.jl#L302-L306">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="KiteModels.calc_azimuth" href="#KiteModels.calc_azimuth"><code>KiteModels.calc_azimuth</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">calc_azimuth(s::AKM)</code></pre><p>Determine the azimuth angle of the kite in wind reference frame in radian. Positive anti-clockwise when seen from above.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KiteModels.jl#L311-L316">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="KiteModels.calc_azimuth_east" href="#KiteModels.calc_azimuth_east"><code>KiteModels.calc_azimuth_east</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">calc_azimuth_east(s::AKM)</code></pre><p>Determine the azimuth_east angle of the kite in radian. Positive clockwise when seen from above.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KiteModels.jl#L322-L327">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="KiteModels.calc_azimuth_north" href="#KiteModels.calc_azimuth_north"><code>KiteModels.calc_azimuth_north</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">calc_azimuth_north(s::AKM)</code></pre><p>Determine the azimuth_north angle of the kite in radian. Positive anti-clockwise when seen from above.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KiteModels.jl#L332-L337">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="KiteUtils.calc_heading" href="#KiteUtils.calc_heading"><code>KiteUtils.calc_heading</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">calc_heading(s::AKM; upwind_dir_=upwind_dir(s), neg_azimuth=false, one_point=false)</code></pre><p>Determine the heading angle of the kite in radian.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KiteModels.jl#L342-L346">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="KiteUtils.calc_course" href="#KiteUtils.calc_course"><code>KiteUtils.calc_course</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">calc_course(s::AKM)</code></pre><p>Determine the course angle of the kite in radian. Undefined if the velocity of the kite is near zero.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KiteModels.jl#L359-L364">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="KiteModels.cl_cd" href="#KiteModels.cl_cd"><code>KiteModels.cl_cd</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">cl_cd(s::KPS4)</code></pre><p>Calculate the lift and drag coefficients of the kite, based on the current angles of attack.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KPS4.jl#L582-L586">source</a></section><section><div><pre><code class="nohighlight hljs">cl_cd(s::KPS3)</code></pre><p>Calculate the lift and drag coefficients of the kite, based on the current angles of attack.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KPS3.jl#L352-L356">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="KiteModels.winch_force" href="#KiteModels.winch_force"><code>KiteModels.winch_force</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">winch_force(s::KPS4)</code></pre><p>Return the absolute value of the force at the winch as calculated during the last timestep. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KPS4.jl#L575-L579">source</a></section><section><div><pre><code class="nohighlight hljs">winch_force(s::KPS3)</code></pre><p>Return the absolute value of the force at the winch as calculated during the last timestep. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KPS3.jl#L333-L337">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="KiteModels.spring_forces" href="#KiteModels.spring_forces"><code>KiteModels.spring_forces</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">spring_forces(s::AKM)</code></pre><p>Return an array of the scalar spring forces of all tether segements.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KPS3.jl#L499-L503">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="KiteModels.lift_drag" href="#KiteModels.lift_drag"><code>KiteModels.lift_drag</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">lift_drag(s::AKM)</code></pre><p>Return a tuple of the scalar lift and drag forces. </p><p><strong>Example:</strong>  </p><pre><code class="nohighlight hljs">lift, drag = lift_drag(s)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KiteModels.jl#L184-L192">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="KiteModels.lift_over_drag" href="#KiteModels.lift_over_drag"><code>KiteModels.lift_over_drag</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">lift_over_drag(s::AKM)</code></pre><p>Return the lift-over-drag ratio.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KiteModels.jl#L195-L199">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="KiteModels.v_wind_kite" href="#KiteModels.v_wind_kite"><code>KiteModels.v_wind_kite</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">v_wind_kite(s::AKM)</code></pre><p>Return the vector of the wind speed at the height of the kite.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KiteModels.jl#L205-L209">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="KiteModels.kite_ref_frame" href="#KiteModels.kite_ref_frame"><code>KiteModels.kite_ref_frame</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">kite_ref_frame(s::KPS4; one_point=false)</code></pre><p>Returns a tuple of the x, y, and z vectors of the kite reference frame.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KPS4.jl#L559-L563">source</a></section><section><div><pre><code class="nohighlight hljs">kite_ref_frame(s::KPS3)</code></pre><p>Returns a tuple of the x, y, and z vectors of the kite reference frame.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KPS3.jl#L245-L249">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="KiteModels.orient_euler" href="#KiteModels.orient_euler"><code>KiteModels.orient_euler</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">orient_euler(s::AKM)</code></pre><p>Calculate and return the orientation of the kite in euler angles (roll, pitch, yaw) as SVector.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KiteModels.jl#L256-L261">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="KiteUtils.SysState" href="#KiteUtils.SysState"><code>KiteUtils.SysState</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">SysState(s::AKM, zoom=1.0)</code></pre><p>Constructor for creating a SysState object from a kite model (KPS3 or KPS4). The SysState object can be used either for logging or for displaying the system state in a viewer. Optionally the position arrays can be zoomed according to the requirements of the viewer.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KiteModels.jl#L534-L541">source</a></section></article><h2 id="High-level-simulation-interface"><a class="docs-heading-anchor" href="#High-level-simulation-interface">High level simulation interface</a><a id="High-level-simulation-interface-1"></a><a class="docs-heading-anchor-permalink" href="#High-level-simulation-interface" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="KiteModels.init_sim!" href="#KiteModels.init_sim!"><code>KiteModels.init_sim!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">init_sim!(s::RamAirKite; prn=true) -&gt; Nothing</code></pre><p>Initialize a complete kite power system model from scratch.</p><p>This function performs the following operations:</p><ol><li>Converts measurement data to quaternion orientation</li><li>Initializes the point mass system representing the kite and tethers</li><li>Creates the symbolic MTK system with all equations</li><li>Simplifies the system equations</li><li>Creates an ODEProblem</li><li>Serializes the problem to disk for future reuse</li><li>Calls <code>reinit!</code> to set up the integrator</li></ol><p>This is a computationally expensive operation and should only be called when the model structure changes. For normal simulations, prefer calling <code>reinit!</code> directly if a serialized problem already exists.</p><p><strong>Arguments</strong></p><ul><li><code>s::RamAirKite</code>: The kite power system state object</li><li><code>prn::Bool=true</code>: Whether to print progress information</li></ul><p><strong>Returns</strong></p><ul><li><code>Nothing</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/ram_air_kite.jl#L356-L380">source</a></section><section><div><pre><code class="nohighlight hljs">init_sim!(s::AKM; t_end=1.0, stiffness_factor=0.5, delta=0.001, upwind_dir=-pi/2, prn=false)</code></pre><p>Initializes the integrator of the model.</p><p>Parameters:</p><ul><li>s:     an instance of an abstract kite model</li><li>t_end: end time of the simulation; normally not needed</li><li>stiffness_factor: factor applied to the tether stiffness during initialization</li><li>delta: initial stretch of the tether during the steady state calculation</li><li>upwind_dir: upwind direction in radians, the direction the wind is coming from. Zero is at north;              clockwise positive. Default: -pi/2, wind from west.</li><li>prn: if set to true, print the detailed solver results</li></ul><p>Returns: An instance of a DAE integrator.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KiteModels.jl#L561-L577">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="KiteModels.next_step!" href="#KiteModels.next_step!"><code>KiteModels.next_step!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">next_step!(s::AKM, integrator; set_speed = nothing, set_torque=nothing, set_force=nothing, bearing = nothing
           attractor=nothing, v_wind_gnd=s.set.v_wind, upwind_dir=-pi/2, dt=1/s.set.sample_freq)</code></pre><p>Calculates the next simulation step. Either <code>set_speed</code> or <code>set_torque</code> must be provided.</p><p>Parameters:</p><ul><li>s:            an instance of an abstract kite model</li><li>integrator:   an integrator instance as returned by the function <a href="#KiteModels.init_sim!"><code>init_sim!</code></a></li><li>set_speed:         set value of reel out speed in m/s or nothing</li><li>set_torque:   set value of the torque in Nm or nothing</li><li>set_force:    set value of the force in N or nothing (only for logging, not used otherwise)</li><li>bearing:      set value of heading/ course in radian or nothing (only for logging, not used otherwise)</li><li>attractor:    the attractor coordinates [azimuth, elevation] in radian or nothing (only for logging)</li><li><code>v_wind_gnd</code>: wind speed at reference height in m/s</li><li><code>upwind_dir</code>: upwind direction in radians, the direction the wind is coming from. Zero is at north;                clockwise positive. Default: -pi/2, wind from west.</li><li>dt:           time step in seconds</li></ul><p>Returns: The end time of the time step in seconds.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KiteModels.jl#L626-L647">source</a></section></article><h2 id="Low-level-simulation-interface"><a class="docs-heading-anchor" href="#Low-level-simulation-interface">Low level simulation interface</a><a id="Low-level-simulation-interface-1"></a><a class="docs-heading-anchor-permalink" href="#Low-level-simulation-interface" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="KiteModels.clear!" href="#KiteModels.clear!"><code>KiteModels.clear!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">clear!(s::KPS4)</code></pre><p>Initialize the kite power model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KPS4.jl#L205-L209">source</a></section><section><div><pre><code class="nohighlight hljs">clear!(s::KPS3)</code></pre><p>Initialize the kite power model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KPS3.jl#L161-L165">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="KiteModels.find_steady_state!" href="#KiteModels.find_steady_state!"><code>KiteModels.find_steady_state!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">find_steady_state!(s::KPS4; prn=false, delta = 0.01, stiffness_factor=0.035, upwind_dir=-pi/2))</code></pre><p>Find an initial equilibrium, based on the initial parameters <code>l_tether</code>, elevation and <code>v_reel_out</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KPS4.jl#L651-L656">source</a></section><section><div><pre><code class="nohighlight hljs">find_steady_state!(s::KPS3; prn=false, delta = 0.0, stiffness_factor=0.035, upwind_dir=-pi/2)</code></pre><p>Find an initial equilibrium, based on the initial parameters <code>l_tether</code>, elevation and <code>v_reel_out</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KPS3.jl#L532-L537">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="KiteModels.residual!" href="#KiteModels.residual!"><code>KiteModels.residual!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">residual!(res, yd, y::MVector{S, SimFloat}, s::KPS4, time) where S

N-point tether model, four points for the kite on top:
Inputs:
State vector y   = pos1,  pos2, ... , posn,  vel1,  vel2, . .., veln,  length, v_reel_out
Derivative   yd  = posd1, posd2, ..., posdn, veld1, veld2, ..., veldn, lengthd, v_reel_outd
Output:
Residual     res = res1, res2 = vel1-posd1,  ..., veld1-acc1, ..., 

Additional parameters:
s: Struct with work variables, type KPS4
S: The dimension of the state vector</code></pre><p>The number of the point masses of the model N = S/6, the state of each point  is represented by two 3 element vectors.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KPS4.jl#L455-L470">source</a></section><section><div><pre><code class="nohighlight hljs">residual!(res, yd, y::MVector{S, SimFloat}, s::KPS3, time) where S

N-point tether model, one point kite at the top:
Inputs:
State vector y   = pos1, pos2, ..., posn, vel1, vel2, ..., veln
Derivative   yd  = vel1, vel2, ..., veln, acc1, acc2, ..., accn
Output:
Residual     res = res1, res2 = pos1,  ..., vel1, ...

Additional parameters:
s: Struct with work variables, type KPS3
S: The dimension of the state vector</code></pre><p>The number of the point masses of the model N = S/6, the state of each point  is represented by two 3 element vectors.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KPS3.jl#L361-L376">source</a></section></article><h2 id="Helper-functions"><a class="docs-heading-anchor" href="#Helper-functions">Helper functions</a><a id="Helper-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Helper-functions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="KiteModels.copy_examples" href="#KiteModels.copy_examples"><code>KiteModels.copy_examples</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">copy_examples()</code></pre><p>Copy all example scripts to the folder &quot;examples&quot; (it will be created if it doesn&#39;t exist).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KiteModels.jl#L681-L686">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="KiteModels.copy_bin" href="#KiteModels.copy_bin"><code>KiteModels.copy_bin</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">copy_bin()</code></pre><p>Copy the scripts create<em>sys</em>image and run_julia to the folder &quot;bin&quot; (it will be created if it doesn&#39;t exist).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KiteModels.jl#L748-L753">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="KiteModels.calc_drag" href="#KiteModels.calc_drag"><code>KiteModels.calc_drag</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">calc_drag(s::KPS3, v_segment, unit_vector, rho, last_tether_drag, v_app_perp)</code></pre><p>Calculate the drag of one tether segment, result stored in parameter <code>last_tether_drag</code>. Return the norm of the apparent wind velocity.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KPS3.jl#L211-L216">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="KiteModels.calc_set_cl_cd!" href="#KiteModels.calc_set_cl_cd!"><code>KiteModels.calc_set_cl_cd!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">calc_set_cl_cd!(s::KPS3, vec_c, v_app)</code></pre><p>Calculate the lift over drag ratio as a function of the direction vector of the last tether segment, the current depower setting and the apparent wind speed. Set the calculated CL and CD values in the struct s. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KPS3.jl#L340-L346">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="KiteModels.calc_aero_forces!" href="#KiteModels.calc_aero_forces!"><code>KiteModels.calc_aero_forces!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">calc_aero_forces!(s::KPS4, pos, vel, rho, alpha_depower, rel_steering)</code></pre><p>Calculates the aerodynamic forces acting on the kite particles.</p><p>Parameters:</p><ul><li>pos:              vector of the particle positions</li><li>vel:              vector of the particle velocities</li><li>rho:              air density [kg/m^3]</li><li>rel_depower:      value between  0.0 and  1.0</li><li>alpha_depower:    depower angle [degrees]</li><li>rel_steering:     value between -1.0 and +1.0</li></ul><p>Updates the vector s.forces of the first parameter.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KPS4.jl#L316-L330">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="KiteModels.calc_particle_forces!" href="#KiteModels.calc_particle_forces!"><code>KiteModels.calc_particle_forces!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">calc_particle_forces!(s::KPS4, pos1, pos2, vel1, vel2, spring, segments, d_tether, rho, i)</code></pre><p>Calculate the drag force of the tether segment, defined by the parameters pos1, pos2, vel1 and vel2 and distribute it equally on the two particles, that are attached to the segment. The result is stored in the array s.forces. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KPS4.jl#L256-L263">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="KiteModels.inner_loop!" href="#KiteModels.inner_loop!"><code>KiteModels.inner_loop!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">inner_loop!(s::KPS4, pos, vel, v_wind_gnd, segments, d_tether)</code></pre><p>Calculate the forces, acting on all particles.</p><p>Output:</p><ul><li>s.forces</li><li><code>s.v_wind_tether</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KPS4.jl#L391-L399">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="KiteModels.loop!" href="#KiteModels.loop!"><code>KiteModels.loop!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">loop!(s::KPS4, pos, vel, posd, veld)</code></pre><p>Calculate the vectors s.res1 and calculate s.res2 using loops that iterate over all tether segments. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ufechner7/KiteModels.jl/blob/313291f1a03aad556b5e670e4cf10d4b5200b944/src/KPS4.jl#L419-L424">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../types/">« Types</a><a class="docs-footer-nextpage" href="../parameters/">Parameters »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Sunday 20 April 2025 09:07">Sunday 20 April 2025</span>. Using Julia version 1.11.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
